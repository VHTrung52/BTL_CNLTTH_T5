{"remainingRequest":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\src\\components\\HoaDon\\ThemSuaHoaDon.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\src\\components\\HoaDon\\ThemSuaHoaDon.vue","mtime":1603960010000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport HoaDonApi, { HoaDonApiSearchParams } from '@/apiResources/HoaDonApi';\nimport { HoaDon } from '@/models/HoaDon';\nimport { DatDichVu } from '@/models/DatDichVu';\nimport DatDichVuApi, { DatDichVuApiSearchParams } from '@/apiResources/DatDichVuApi';\nimport { ThuePhong } from '@/models/ThuePhong';\nimport ThuePhongApi, { ThuePhongApiSearchParams } from '@/apiResources/ThuePhongApi';\nimport { KhachHang } from '@/models/KhachHang';\nimport KhachHangApi, { KhachHangApiSearchParams } from '@/apiResources/KhachHangApi';\nimport DichVuApi, { DichVuApiSearchParams } from '@/apiResources/DichVuApi';\nimport PhongApi, { PhongApiSearchParams } from '@/apiResources/PhongApi';\nimport BangGiaApi, { BangGiaApiSearchParams } from '@/apiResources/BangGiaApi';\nimport LoaiPhongApi, { LoaiPhongApiSearchParams } from '@/apiResources/LoaiPhongApi';\nimport { Phong } from '@/models/Phong';\nimport { LoaiPhong } from '@/models/LoaiPhong';\nimport { DichVu } from '@/models/DichVu';\nimport { BangGia } from '@/models/BangGia';\nimport store from '@/store/store';\n\nexport default Vue.extend({\n    $_veeValidate: {\n        validator: 'new'\n    },\n    components: {},\n    data() {\n        return {\n            dialogThongBao: false,\n            daTonTai: null as any,\n            isUpdate: false,\n            bangGia: {} as BangGia,\n            hoaDon: {} as HoaDon,\n            khachHang: {} as KhachHang,\n            datDichVu: {} as DatDichVu,\n            thuePhong: {} as ThuePhong,\n            dsDichVu: [] as DichVu[],\n            dsPhong: [] as Phong[],\n            dsLoaiPhong: [] as LoaiPhong[],\n            searchDichVu: '',\n            searchPhong: '',\n            searchLoaiPhong: '',\n            searchParamsDichVu: { includeEntities: true } as DichVuApiSearchParams,\n            searchParamsLoaiPhong: { includeEntities: true } as LoaiPhongApiSearchParams,\n            searchParamsPhong: { includeEntities: true } as PhongApiSearchParams,\n            dsDatDichVu: [] as DatDichVu[],\n            dsDatDichVuLoading: false,\n            searchDatDichVu: '',\n            searchParamsDatDichVu: { includeEntities: true } as DatDichVuApiSearchParams,\n            tableHeaderDatDichVu: [\n                { text: '#', value: 'DatDichVuID', align: 'center', sortable: true },\n                { text: 'Tên dịch vụ', value: 'SoLuong', align: 'center', sortable: true },\n                { text: 'Số lượng đặt', value: 'DichVuID', align: 'center', sortable: true },\n                { text: 'Giá bán', value: 'HoaDonID', align: 'center', sortable: true },\n                { text: 'Mô tả', value: 'HoaDonID', align: 'center', sortable: true },\n                { text: 'Thao tác', value: 'HoaDonID', align: 'center', sortable: true },\n            ],\n            dsThuePhong: [] as ThuePhong[],\n            dsThuePhongLoading: false,\n            searchThuePhong: '',\n            searchParamsThuePhong: { includeEntities: true } as ThuePhongApiSearchParams,\n            tableHeaderThuePhong: [\n                { text: '#', value: 'ThuePhongID', align: 'center', sortable: true },\n                { text: 'Số phòng', value: 'PhongID', align: 'center', sortable: true },\n                { text: 'Loại phòng', value: 'HoaDonID', align: 'center', sortable: true },\n                { text: 'Giá phòng', value: 'HoaDonID', align: 'center', sortable: true },\n                { text: 'Thao tác', value: 'HoaDonID', align: 'center', sortable: true },\n            ],\n            loading: false,\n            searchParamsHoaDon: {} as HoaDonApiSearchParams,\n            dialog: false,\n            selectedDatDichVu: {} as DatDichVu,\n            selectedThuePhong: {} as ThuePhong,\n            dialogConfirmDelete: false,\n            isUpdateDichVu: false,\n            dichVu: {} as DichVu\n        }\n    },\n    methods: {\n        show(isUpdate: boolean, item: any) {\n            this.dialog = true;\n            this.daTonTai = null as any;\n            this.$validator.errors.clear(\"frmAddEdit\");\n            this.hoaDon = Object.assign({}, item);\n            this.khachHang = {} as KhachHang;\n            this.thuePhong = {} as ThuePhong;\n            this.datDichVu = {} as DatDichVu;\n            this.dsDatDichVu = [] as DatDichVu[];\n            this.dsThuePhong = [] as ThuePhong[];\n            this.getDSLoaiPhong();\n            this.getDSDichVu();\n            this.isUpdateDichVu = false;\n            this.isUpdate = isUpdate;\n            if (this.isUpdate !== true) {\n                this.hoaDon = {} as HoaDon;\n            }\n            else {\n                this.daTonTai = true;\n                this.getDataFromApi(this.hoaDon.HoaDonID);\n            }\n        },\n        xuLyThongTinKhachHang() {\n            if (this.daTonTai == null) {\n                KhachHangApi.kiemtra(this.khachHang.CMND).then(res => {\n                    this.dialogThongBao = true\n                    if (res == null)\n                        this.daTonTai = false\n                    else {\n                        this.daTonTai = true;\n                        this.khachHang = res;\n                    }\n                });\n            }\n            if (this.daTonTai == false) {\n                KhachHangApi.insert(this.khachHang).then(res => {\n                    this.khachHang = res;\n                    this.$snotify.success('Thêm mới khách hàng thành công!');\n                }).catch(res => {\n                    this.$snotify.error('Thêm mới khách hàng thất bại!');\n                })\n            }\n            if (this.daTonTai == true) {\n                KhachHangApi.update(this.khachHang.KhachHangID, this.khachHang).then(res => {\n                    this.khachHang = res;\n                    this.$snotify.success('Cập nhật khách hàng thành công!');\n                }).catch(res => {\n                    this.$snotify.error('Cập nhật khách hàng thất bại!');\n                })\n            }\n        },\n        getDataFromApi(id: number): void {\n            HoaDonApi.detail(id).then(res => {\n                this.hoaDon = res;\n                this.dsThuePhong = res.ThuePhong as any;\n                this.dsDatDichVu = res.DatDichVu as any;\n                this.khachHang = res.KhachHang as any;\n            });\n        },\n        getDSPhong(): void {\n            this.searchParamsPhong.ngayNhanPhong = this.hoaDon.ThoiGianNhanPhong;\n            PhongApi.search(this.searchParamsPhong).then(res => {\n                this.getGiaApDung();\n                this.dsPhong = res.Data;\n            });\n        },\n        getDSLoaiPhong(): void {\n            LoaiPhongApi.search(this.searchParamsLoaiPhong).then(res => {\n                this.dsLoaiPhong = res.Data;\n            });\n        },\n        getDSDichVu(): void {\n            DichVuApi.search(this.searchParamsDichVu).then(res => {\n                this.dsDichVu = res.Data;\n            });\n        },\n        getDichVu(): void {\n            DichVuApi.detail(this.datDichVu.DichVuID).then(res => {\n                this.dichVu = res;\n            });\n        },\n        getGiaApDung(): void {\n            var thoigian = this.$moment(this.hoaDon.ThoiGianNhanPhong).format(\"DD/MM/YYYY\");\n            if (this.searchParamsPhong.loaiPhongID != null && this.searchParamsPhong.loaiPhongID != undefined) {\n                BangGiaApi.giaapdung(thoigian,\n                    this.searchParamsPhong.loaiPhongID as any).then(res => {\n                        this.bangGia = res\n                    })\n            }\n        },\n        getDSThuePhong() {\n            this.searchParamsThuePhong.hoaDonID = this.hoaDon.HoaDonID;\n            ThuePhongApi.search(this.searchParamsThuePhong).then(res => {\n                this.dsThuePhong = res.Data;\n            })\n        },\n        getDSDatDichVu() {\n            this.searchParamsDatDichVu.hoaDonID = this.hoaDon.HoaDonID;\n            DatDichVuApi.search(this.searchParamsDatDichVu).then(res => {\n                this.dsDatDichVu = res.Data;\n            })\n        },\n        themSuaThuePhong(isUpdate: boolean, item: any) {\n            this.thuePhong.BangGiaID = this.bangGia.BangGiaID;\n            this.thuePhong.HoaDonID = this.hoaDon.HoaDonID;\n            if (isUpdate == true) {\n\n            }\n            else {\n                ThuePhongApi.insert(this.thuePhong).then(res => {\n                    this.thuePhong = {} as ThuePhong;\n                    this.searchParamsPhong.loaiPhongID = null as any;\n                    this.getDSThuePhong();\n                });\n            }\n        },\n        themSuaDatDichVu(isUpdate: boolean, item: any) {\n            this.datDichVu.HoaDonID = this.hoaDon.HoaDonID;\n            if (isUpdate == true) {\n                DatDichVuApi.detail(item.DatDichVuID).then(res => {\n                    this.datDichVu = res;\n                    this.isUpdateDichVu = true;\n                });\n            }\n            else {\n                if (this.isUpdateDichVu == true) {\n                    DatDichVuApi.update(this.datDichVu.DatDichVuID, this.datDichVu).then(res => {\n                        this.datDichVu = {} as DatDichVu;\n                        this.isUpdateDichVu = false;\n                        this.getDSDatDichVu();\n                        this.$snotify.success('Cập nhật thành công!');\n                    }).catch(res => {\n                        this.loading = false;\n                        this.$snotify.error('Cập nhật thất bại!');\n                    });\n                }\n                else {\n                    DatDichVuApi.insert(this.datDichVu).then(res => {\n                        this.datDichVu = {} as DatDichVu;\n                        this.isUpdateDichVu = false;\n                        this.getDSDatDichVu();\n                    });\n                }\n\n            }\n        },\n        confirmDelete(item1: ThuePhong, item2: DatDichVu): void {\n            this.selectedThuePhong = item1;\n            this.selectedDatDichVu = item2;\n            this.dialogConfirmDelete = true;\n        },\n        deleteChiTietHoaDon(): void {\n            if (this.selectedDatDichVu != null) {\n                DatDichVuApi.delete(this.selectedDatDichVu.DatDichVuID).then(res => {\n                    this.$snotify.success('Xóa thành công!');\n                    this.getDSDatDichVu();\n                    this.dialogConfirmDelete = false;\n                }).catch(res => {\n                    this.$snotify.error('Xóa thất bại!');\n                });\n            }\n            if (this.selectedThuePhong != null) {\n                ThuePhongApi.delete(this.selectedThuePhong.ThuePhongID).then(res => {\n                    this.$snotify.success('Xóa thành công!');\n                    this.getDSThuePhong();\n                    this.dialogConfirmDelete = false;\n                }).catch(res => {\n                    this.$snotify.error('Xóa thất bại!');\n                });\n            }\n        },\n        save(): void {\n            this.$validator.validateAll('frmAddEdit').then((res) => {\n                if (res) {\n                    this.hoaDon.DatPhong = undefined;\n                    this.hoaDon.NhanVien = undefined;\n                    this.hoaDon.KhachHang = undefined;\n                    this.hoaDon.DatDichVu = undefined;\n                    this.hoaDon.ThuePhong = undefined;\n                    if (this.isUpdate) {\n                        this.loading = true;\n                        HoaDonApi.update(this.hoaDon.HoaDonID, this.hoaDon).then(res => {\n                            this.loading = false;\n                            this.dialog = false;\n                            this.$emit(\"getLaiDanhSach\");\n                            this.$snotify.success('Cập nhật thành công!');\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Cập nhật thất bại!');\n                        });\n                    } else {\n                        this.loading = true;\n                        this.hoaDon.KhachHangID = this.khachHang.KhachHangID;\n                        this.hoaDon.NhanVienID = store.state.user.Profile.NhanVien.NhanVienID;\n                        HoaDonApi.insert(this.hoaDon).then(res => {\n                            this.hoaDon = res;\n                            this.isUpdate = true;\n                            this.loading = false;\n                            this.$emit(\"getLaiDanhSach\");\n                            this.$snotify.success('Thêm mới thành công!');\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Thêm mới thất bại!');\n                        });\n                    }\n                }\n            });\n        },\n    }\n});\n",{"version":3,"sources":["ThemSuaHoaDon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThemSuaHoaDon.vue","sourceRoot":"src\\components\\HoaDon","sourcesContent":["<template>\r\n    <v-dialog v-model=\"dialog\" width=\"800\" persistent scrollable>\r\n        <v-container pa-0 grid-list-md>\r\n            <v-card>\r\n                <v-card-title class=\"primary white--text\" style=\"padding: 5px 15px 5px 15px\">\r\n                    <h3>{{isUpdate ? 'Cập nhật hóa đơn' : 'Thêm mới hóa đơn'}}</h3>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn class=\"white--text ma-0\" small @click.native=\"dialog = false\" icon dark><v-icon>close</v-icon></v-btn>\r\n                </v-card-title>\r\n                <v-card-text>\r\n                    <v-form scope=\"frmAddEdit\">\r\n                        <v-layout row wrap>\r\n                            <v-flex xs12>\r\n                                <h3>Thông tin khách hàng</h3>\r\n                            </v-flex>\r\n                            <v-flex xs12>\r\n                                <v-layout nowrap>\r\n                                    <v-flex xs4>\r\n                                        <v-text-field v-model=\"khachHang.CMND\"\r\n                                                      label=\"CMND\" :disabled=\"daTonTai\"\r\n                                                      type=\"text\"\r\n                                                      :error-messages=\"errors.collect('CMND', 'frmAddEdit')\"\r\n                                                      v-validate=\"'required'\"\r\n                                                      data-vv-scope=\"frmAddEdit\"\r\n                                                      data-vv-name=\"CMND\"></v-text-field>\r\n                                    </v-flex>\r\n                                    <v-spacer></v-spacer>\r\n                                    <v-btn class=\"white--text\" style=\"margin-top: 15px!important\" @click=\"xuLyThongTinKhachHang()\" small color=\"primary\">{{daTonTai == null? 'Kiểm tra' : 'Lưu thông tin'}}</v-btn>\r\n                                </v-layout>\r\n                            </v-flex>\r\n                            <v-flex xs4 v-if=\"daTonTai!=null\">\r\n                                <v-text-field v-model=\"khachHang.HoTen\"\r\n                                              label=\"Họ tên\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Họ tên', 'frmAddEdit')\"\r\n                                              v-validate=\"'required'\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Họ tên\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs4 v-if=\"daTonTai!=null\">\r\n                                <v-datepicker v-model=\"khachHang.NgaySinh\"\r\n                                              label=\"Ngày sinh\"\r\n                                              type=\"date\"\r\n                                              :error-messages=\"errors.collect('Ngày sinh', 'frmAddEdit')\"\r\n                                              v-validate=\"''\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Ngày sinh\"\r\n                                              clearable></v-datepicker>\r\n                            </v-flex>\r\n                            <v-flex xs4 v-if=\"daTonTai!=null\">\r\n                                <v-radio-group v-model=\"khachHang.GioiTinh\" row>\r\n                                    <v-radio label=\"Nam\" :value=\"true\"></v-radio>\r\n                                    <v-radio label=\"Nữ\" :value=\"false\"></v-radio>\r\n                                </v-radio-group>\r\n                            </v-flex>\r\n\r\n                            <v-flex xs4 v-if=\"daTonTai!=null\">\r\n                                <v-text-field v-model=\"khachHang.SoDienThoai\"\r\n                                              label=\"Số điện thoại\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Số điện thoại', 'frmAddEdit')\"\r\n                                              v-validate=\"'required'\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Số điện thoại\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n\r\n                            <v-flex xs8 v-if=\"daTonTai!=null\">\r\n                                <v-text-field v-model=\"khachHang.DiaChi\"\r\n                                              label=\"Địa chỉ\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Địa chỉ', 'frmAddEdit')\"\r\n                                              v-validate=\"''\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Địa chỉ\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n                        </v-layout>\r\n                        <v-layout row wrap>\r\n                            <v-flex xs12>\r\n                                <h3>Thông tin thuê phòng/ dịch vụ</h3>\r\n                            </v-flex>\r\n                            <v-flex xs6>\r\n                                <v-text-field v-model=\"hoaDon.MaHoaDon\"\r\n                                              label=\"Mã hóa đơn\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Mã hóa đơn', 'frmAddEdit')\"\r\n                                              v-validate=\"''\"\r\n                                              disabled\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Mã hóa đơn\"></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs6>\r\n                                <v-checkbox v-model=\"hoaDon.TrangThai\"\r\n                                            label=\"Xác nhận thanh toán\"></v-checkbox>\r\n                            </v-flex>\r\n                            <v-flex xs6>\r\n                                <v-datetimepicker v-model=\"hoaDon.ThoiGianNhanPhong\"\r\n                                                  label=\"Ngày nhận phòng\"\r\n                                                  :error-messages=\"errors.collect('Ngày nhận phòng', 'frmAddEdit')\"\r\n                                                  v-validate=\"'required'\"\r\n                                                  data-vv-scope=\"frmAddEdit\" @input=\"getGiaApDung()\"\r\n                                                  data-vv-name=\"Ngày nhận phòng\"></v-datetimepicker>\r\n                            </v-flex>\r\n                            <v-flex xs6>\r\n                                <v-datetimepicker v-model=\"hoaDon.ThoiGianTraPhong\"\r\n                                                  label=\"Ngày trả phòng\"\r\n                                                  :error-messages=\"errors.collect('Ngày trả phòng', 'frmAddEdit')\"\r\n                                                  v-validate=\"''\"\r\n                                                  data-vv-scope=\"frmAddEdit\"\r\n                                                  data-vv-name=\"Ngày trả phòng\"></v-datetimepicker>\r\n                            </v-flex>\r\n                            <v-flex xs4>\r\n                                <v-datepicker v-model=\"hoaDon.NgayThanhToan\"\r\n                                              label=\"Ngày thanh toán\"\r\n                                              :error-messages=\"errors.collect('Ngày thanh toán', 'frmAddEdit')\"\r\n                                              v-validate=\"''\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Ngày thanh toán\"></v-datepicker>\r\n                            </v-flex>\r\n                            <v-flex xs4>\r\n                                <v-text-field v-model=\"hoaDon.SoTaiKhoan\"\r\n                                              label=\"Số tài khoản\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Số tài khoản', 'frmAddEdit')\"\r\n                                              v-validate=\"''\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Số tài khoản\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs4>\r\n                                <v-text-field v-model=\"hoaDon.PhuThu\"\r\n                                              label=\"Phụ thu\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Phụ thu', 'frmAddEdit')\"\r\n                                              v-validate=\"''\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Phụ thu\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs12>\r\n                                <v-textarea rows=\"3\" v-model=\"hoaDon.LyDo\"\r\n                                            label=\"Lý do phụ thu\"\r\n                                            :error-messages=\"errors.collect('Lý do phụ thu', 'frmAddEdit')\"\r\n                                            v-validate=\"''\" hide-details\r\n                                            data-vv-scope=\"frmAddEdit\"\r\n                                            data-vv-name=\"Lý do phụ thu\"></v-textarea>\r\n                            </v-flex>\r\n                            <v-flex xs12 v-if=\"hoaDon.HoaDonID != null && hoaDon.HoaDonID != undefined\">\r\n                                <v-tabs>\r\n                                    <v-tab :key=\"1\">\r\n                                        <b>Phòng ở</b>\r\n                                    </v-tab>\r\n                                    <v-tab-item :key=\"1\">\r\n                                        <v-card flat>\r\n                                            <v-card-text class=\"pa-0\">\r\n                                                <v-layout nowrap>\r\n                                                    <v-flex xs4>\r\n                                                        <v-autocomplete v-model=\"searchParamsPhong.loaiPhongID\"\r\n                                                                        :items=\"dsLoaiPhong\"\r\n                                                                        :search-input.sync=\"searchLoaiPhong\"\r\n                                                                        item-text=\"TenLoaiPhong\"\r\n                                                                        item-value=\"LoaiPhongID\"\r\n                                                                        label=\"Loại phòng\"\r\n                                                                        placeholder=\"Chọn loại phòng\"\r\n                                                                        @change=\"getDSPhong()\"\r\n                                                                        clearable></v-autocomplete>\r\n                                                    </v-flex>\r\n                                                    <v-flex xs4>\r\n                                                        <v-autocomplete v-model=\"thuePhong.PhongID\"\r\n                                                                        :items=\"dsPhong\"\r\n                                                                        :search-input.sync=\"searchPhong\"\r\n                                                                        item-text=\"SoPhong\"\r\n                                                                        item-value=\"PhongID\"\r\n                                                                        label=\"Phòng\"\r\n                                                                        placeholder=\"Chọn phòng\"\r\n                                                                        :error-messages=\"errors.collect('Phòng', 'frmAddEdit')\"\r\n                                                                        v-validate=\"''\"\r\n                                                                        data-vv-scope=\"frmAddEdit\"\r\n                                                                        data-vv-name=\"Phòng\"\r\n                                                                        clearable></v-autocomplete>\r\n                                                    </v-flex>\r\n                                                    <v-flex xs2>\r\n                                                        Giá áp dụng: {{bangGia.GiaPhong}}\r\n                                                    </v-flex>\r\n                                                    <v-spacer></v-spacer>\r\n                                                    <div class=\"text-xs-right\">\r\n                                                        <v-btn color=\"primary\" small icon @click=\"themSuaThuePhong(false,{})\"><v-icon>add</v-icon></v-btn>\r\n                                                    </div>\r\n                                                </v-layout>\r\n                                                <v-layout>\r\n                                                    <v-flex xs12>\r\n                                                        <v-data-table :headers=\"tableHeaderThuePhong\"\r\n                                                                      :items=\"dsThuePhong\"\r\n                                                                      :pagination.sync=\"searchParamsThuePhong\"\r\n                                                                      :total-items=\"searchParamsThuePhong.totalItems\"\r\n                                                                      :loading=\"dsThuePhongLoading\"\r\n                                                                      class=\"table-border table\">\r\n                                                            <template slot=\"items\" slot-scope=\"props\">\r\n                                                                <td>{{ props.index + 1 }}</td>\r\n                                                                <td>{{ props.item.SoPhong }}</td>\r\n                                                                <td>{{ props.item.TenLoaiPhong }}</td>\r\n                                                                <td>{{ props.item.GiaPhong }}</td>\r\n                                                                <td class=\"text-xs-center\" style=\"width:80px;\">\r\n                                                                    <v-btn flat color=\"red\" @click=\"confirmDelete(props.item, null)\" icon small class=\"ma-0\">\r\n                                                                        <v-icon small>delete</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </td>\r\n                                                            </template>\r\n                                                        </v-data-table>\r\n                                                    </v-flex>\r\n                                                </v-layout>\r\n                                            </v-card-text>\r\n                                        </v-card>\r\n                                    </v-tab-item>\r\n                                    <v-tab :key=\"2\">\r\n                                        <b>Dịch vụ</b>\r\n                                    </v-tab>\r\n                                    <v-tab-item :key=\"2\">\r\n                                        <v-card flat>\r\n                                            <v-card-text class=\"pa-0\">\r\n                                                <v-layout nowrap>\r\n                                                    <v-flex xs4>\r\n                                                        <v-autocomplete v-model=\"datDichVu.DichVuID\"\r\n                                                                        :items=\"dsDichVu\"\r\n                                                                        :search-input.sync=\"searchDichVu\"\r\n                                                                        item-text=\"TenDichVu\"\r\n                                                                        item-value=\"DichVuID\"\r\n                                                                        label=\"Dịch vụ\"\r\n                                                                        placeholder=\"Chọn dịch vụ\"\r\n                                                                        @change=\"getDichVu()\"\r\n                                                                        clearable></v-autocomplete>\r\n                                                    </v-flex>\r\n                                                    <v-flex xs4>\r\n                                                        <v-text-field v-model=\"datDichVu.SoLuong\"\r\n                                                                      label=\"Số lượng đặt\"\r\n                                                                      placeholder=\"Nhập số lượng\"\r\n                                                                      :error-messages=\"errors.collect('Số lượng đặt', 'frmAddEdit')\"\r\n                                                                      v-validate=\"''\"\r\n                                                                      data-vv-scope=\"frmAddEdit\"\r\n                                                                      data-vv-name=\"Số lượng đặt\"\r\n                                                                      clearable></v-text-field>\r\n                                                    </v-flex>\r\n                                                    <v-flex xs2>\r\n                                                        Đơn vị tính: {{dichVu.DonViTinh}}\r\n                                                    </v-flex>\r\n                                                    <v-spacer></v-spacer>\r\n                                                    <div class=\"text-xs-right\">\r\n                                                        <v-btn color=\"primary\" @click=\"themSuaDatDichVu(false, {})\" small icon><v-icon>{{isUpdateDichVu ? 'done' : 'add'}}</v-icon></v-btn>\r\n                                                    </div>\r\n                                                </v-layout>\r\n                                                <v-layout>\r\n                                                    <v-flex xs12>\r\n                                                        <v-data-table :headers=\"tableHeaderDatDichVu\"\r\n                                                                      :items=\"dsDatDichVu\"\r\n                                                                      :pagination.sync=\"searchParamsDatDichVu\"\r\n                                                                      :total-items=\"searchParamsDatDichVu.totalItems\"\r\n                                                                      :loading=\"dsDatDichVuLoading\"\r\n                                                                      class=\"table-border table\">\r\n                                                            <template slot=\"items\" slot-scope=\"props\">\r\n                                                                <td>{{ props.index + 1 }}</td>\r\n                                                                <td>{{ props.item.TenDichVu }}</td>\r\n                                                                <td>{{ props.item.SoLuong }}</td>\r\n                                                                <td>{{ props.item.GiaBan }}</td>\r\n                                                                <td>{{ props.item.MoTa}}</td>\r\n                                                                <td class=\"text-xs-center\" style=\"width:80px;\">\r\n                                                                    <v-btn flat icon small @click=\"themSuaDatDichVu(true, props.item)\" class=\"ma-0\">\r\n                                                                        <v-icon small>edit</v-icon>\r\n                                                                    </v-btn>\r\n                                                                    <v-btn flat color=\"red\" icon small @click=\"confirmDelete(null,props.item)\" class=\"ma-0\">\r\n                                                                        <v-icon small>delete</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </td>\r\n                                                            </template>\r\n                                                        </v-data-table>\r\n                                                    </v-flex>\r\n                                                </v-layout>\r\n                                            </v-card-text>\r\n                                        </v-card>\r\n                                    </v-tab-item>\r\n                                </v-tabs>\r\n                            </v-flex>\r\n                        </v-layout>\r\n                    </v-form>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn class=\"primary\" :disabled=\"loading\" :loading=\"loading\" @click.native=\"save\">{{isUpdate?'Cập nhật':'Thêm mới'}}</v-btn>\r\n                </v-card-actions>\r\n                <v-dialog v-model=\"dialogConfirmDelete\" max-width=\"290\">\r\n                    <v-card>\r\n                        <v-card-title class=\"headline\">Xác nhận xóa</v-card-title>\r\n                        <v-card-text class=\"pt-3\">Bạn có chắc chắn muốn xóa?</v-card-text>\r\n                        <v-card-actions>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn @click.native=\"dialogConfirmDelete=false\" flat>Hủy</v-btn>\r\n                            <v-btn color=\"red darken-1\" @click.native=\"deleteChiTietHoaDon\" flat>Xác Nhận</v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n                <v-dialog v-model=\"dialogThongBao\" persistent max-width=\"290\">\r\n                    <v-card>\r\n                        <v-card-title class=\"headline\">Thông báo</v-card-title>\r\n                        <v-card-text>\r\n                            <p>Khách hàng {{daTonTai ? \"đã\" : \"chưa\"}} tồn tại trong hệ thống</p>\r\n                        </v-card-text>\r\n                        <v-card-actions>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn color=\"blue darken-1\" flat text @click=\"dialogThongBao = false\">Ok</v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n            </v-card>\r\n        </v-container>\r\n    </v-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import HoaDonApi, { HoaDonApiSearchParams } from '@/apiResources/HoaDonApi';\r\n    import { HoaDon } from '@/models/HoaDon';\r\n    import { DatDichVu } from '@/models/DatDichVu';\r\n    import DatDichVuApi, { DatDichVuApiSearchParams } from '@/apiResources/DatDichVuApi';\r\n    import { ThuePhong } from '@/models/ThuePhong';\r\n    import ThuePhongApi, { ThuePhongApiSearchParams } from '@/apiResources/ThuePhongApi';\r\n    import { KhachHang } from '@/models/KhachHang';\r\n    import KhachHangApi, { KhachHangApiSearchParams } from '@/apiResources/KhachHangApi';\r\n    import DichVuApi, { DichVuApiSearchParams } from '@/apiResources/DichVuApi';\r\n    import PhongApi, { PhongApiSearchParams } from '@/apiResources/PhongApi';\r\n    import BangGiaApi, { BangGiaApiSearchParams } from '@/apiResources/BangGiaApi';\r\n    import LoaiPhongApi, { LoaiPhongApiSearchParams } from '@/apiResources/LoaiPhongApi';\r\n    import { Phong } from '@/models/Phong';\r\n    import { LoaiPhong } from '@/models/LoaiPhong';\r\n    import { DichVu } from '@/models/DichVu';\r\n    import { BangGia } from '@/models/BangGia';\r\n    import store from '@/store/store';\r\n\r\n    export default Vue.extend({\r\n        $_veeValidate: {\r\n            validator: 'new'\r\n        },\r\n        components: {},\r\n        data() {\r\n            return {\r\n                dialogThongBao: false,\r\n                daTonTai: null as any,\r\n                isUpdate: false,\r\n                bangGia: {} as BangGia,\r\n                hoaDon: {} as HoaDon,\r\n                khachHang: {} as KhachHang,\r\n                datDichVu: {} as DatDichVu,\r\n                thuePhong: {} as ThuePhong,\r\n                dsDichVu: [] as DichVu[],\r\n                dsPhong: [] as Phong[],\r\n                dsLoaiPhong: [] as LoaiPhong[],\r\n                searchDichVu: '',\r\n                searchPhong: '',\r\n                searchLoaiPhong: '',\r\n                searchParamsDichVu: { includeEntities: true } as DichVuApiSearchParams,\r\n                searchParamsLoaiPhong: { includeEntities: true } as LoaiPhongApiSearchParams,\r\n                searchParamsPhong: { includeEntities: true } as PhongApiSearchParams,\r\n                dsDatDichVu: [] as DatDichVu[],\r\n                dsDatDichVuLoading: false,\r\n                searchDatDichVu: '',\r\n                searchParamsDatDichVu: { includeEntities: true } as DatDichVuApiSearchParams,\r\n                tableHeaderDatDichVu: [\r\n                    { text: '#', value: 'DatDichVuID', align: 'center', sortable: true },\r\n                    { text: 'Tên dịch vụ', value: 'SoLuong', align: 'center', sortable: true },\r\n                    { text: 'Số lượng đặt', value: 'DichVuID', align: 'center', sortable: true },\r\n                    { text: 'Giá bán', value: 'HoaDonID', align: 'center', sortable: true },\r\n                    { text: 'Mô tả', value: 'HoaDonID', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: 'HoaDonID', align: 'center', sortable: true },\r\n                ],\r\n                dsThuePhong: [] as ThuePhong[],\r\n                dsThuePhongLoading: false,\r\n                searchThuePhong: '',\r\n                searchParamsThuePhong: { includeEntities: true } as ThuePhongApiSearchParams,\r\n                tableHeaderThuePhong: [\r\n                    { text: '#', value: 'ThuePhongID', align: 'center', sortable: true },\r\n                    { text: 'Số phòng', value: 'PhongID', align: 'center', sortable: true },\r\n                    { text: 'Loại phòng', value: 'HoaDonID', align: 'center', sortable: true },\r\n                    { text: 'Giá phòng', value: 'HoaDonID', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: 'HoaDonID', align: 'center', sortable: true },\r\n                ],\r\n                loading: false,\r\n                searchParamsHoaDon: {} as HoaDonApiSearchParams,\r\n                dialog: false,\r\n                selectedDatDichVu: {} as DatDichVu,\r\n                selectedThuePhong: {} as ThuePhong,\r\n                dialogConfirmDelete: false,\r\n                isUpdateDichVu: false,\r\n                dichVu: {} as DichVu\r\n            }\r\n        },\r\n        methods: {\r\n            show(isUpdate: boolean, item: any) {\r\n                this.dialog = true;\r\n                this.daTonTai = null as any;\r\n                this.$validator.errors.clear(\"frmAddEdit\");\r\n                this.hoaDon = Object.assign({}, item);\r\n                this.khachHang = {} as KhachHang;\r\n                this.thuePhong = {} as ThuePhong;\r\n                this.datDichVu = {} as DatDichVu;\r\n                this.dsDatDichVu = [] as DatDichVu[];\r\n                this.dsThuePhong = [] as ThuePhong[];\r\n                this.getDSLoaiPhong();\r\n                this.getDSDichVu();\r\n                this.isUpdateDichVu = false;\r\n                this.isUpdate = isUpdate;\r\n                if (this.isUpdate !== true) {\r\n                    this.hoaDon = {} as HoaDon;\r\n                }\r\n                else {\r\n                    this.daTonTai = true;\r\n                    this.getDataFromApi(this.hoaDon.HoaDonID);\r\n                }\r\n            },\r\n            xuLyThongTinKhachHang() {\r\n                if (this.daTonTai == null) {\r\n                    KhachHangApi.kiemtra(this.khachHang.CMND).then(res => {\r\n                        this.dialogThongBao = true\r\n                        if (res == null)\r\n                            this.daTonTai = false\r\n                        else {\r\n                            this.daTonTai = true;\r\n                            this.khachHang = res;\r\n                        }\r\n                    });\r\n                }\r\n                if (this.daTonTai == false) {\r\n                    KhachHangApi.insert(this.khachHang).then(res => {\r\n                        this.khachHang = res;\r\n                        this.$snotify.success('Thêm mới khách hàng thành công!');\r\n                    }).catch(res => {\r\n                        this.$snotify.error('Thêm mới khách hàng thất bại!');\r\n                    })\r\n                }\r\n                if (this.daTonTai == true) {\r\n                    KhachHangApi.update(this.khachHang.KhachHangID, this.khachHang).then(res => {\r\n                        this.khachHang = res;\r\n                        this.$snotify.success('Cập nhật khách hàng thành công!');\r\n                    }).catch(res => {\r\n                        this.$snotify.error('Cập nhật khách hàng thất bại!');\r\n                    })\r\n                }\r\n            },\r\n            getDataFromApi(id: number): void {\r\n                HoaDonApi.detail(id).then(res => {\r\n                    this.hoaDon = res;\r\n                    this.dsThuePhong = res.ThuePhong as any;\r\n                    this.dsDatDichVu = res.DatDichVu as any;\r\n                    this.khachHang = res.KhachHang as any;\r\n                });\r\n            },\r\n            getDSPhong(): void {\r\n                this.searchParamsPhong.ngayNhanPhong = this.hoaDon.ThoiGianNhanPhong;\r\n                PhongApi.search(this.searchParamsPhong).then(res => {\r\n                    this.getGiaApDung();\r\n                    this.dsPhong = res.Data;\r\n                });\r\n            },\r\n            getDSLoaiPhong(): void {\r\n                LoaiPhongApi.search(this.searchParamsLoaiPhong).then(res => {\r\n                    this.dsLoaiPhong = res.Data;\r\n                });\r\n            },\r\n            getDSDichVu(): void {\r\n                DichVuApi.search(this.searchParamsDichVu).then(res => {\r\n                    this.dsDichVu = res.Data;\r\n                });\r\n            },\r\n            getDichVu(): void {\r\n                DichVuApi.detail(this.datDichVu.DichVuID).then(res => {\r\n                    this.dichVu = res;\r\n                });\r\n            },\r\n            getGiaApDung(): void {\r\n                var thoigian = this.$moment(this.hoaDon.ThoiGianNhanPhong).format(\"DD/MM/YYYY\");\r\n                if (this.searchParamsPhong.loaiPhongID != null && this.searchParamsPhong.loaiPhongID != undefined) {\r\n                    BangGiaApi.giaapdung(thoigian,\r\n                        this.searchParamsPhong.loaiPhongID as any).then(res => {\r\n                            this.bangGia = res\r\n                        })\r\n                }\r\n            },\r\n            getDSThuePhong() {\r\n                this.searchParamsThuePhong.hoaDonID = this.hoaDon.HoaDonID;\r\n                ThuePhongApi.search(this.searchParamsThuePhong).then(res => {\r\n                    this.dsThuePhong = res.Data;\r\n                })\r\n            },\r\n            getDSDatDichVu() {\r\n                this.searchParamsDatDichVu.hoaDonID = this.hoaDon.HoaDonID;\r\n                DatDichVuApi.search(this.searchParamsDatDichVu).then(res => {\r\n                    this.dsDatDichVu = res.Data;\r\n                })\r\n            },\r\n            themSuaThuePhong(isUpdate: boolean, item: any) {\r\n                this.thuePhong.BangGiaID = this.bangGia.BangGiaID;\r\n                this.thuePhong.HoaDonID = this.hoaDon.HoaDonID;\r\n                if (isUpdate == true) {\r\n\r\n                }\r\n                else {\r\n                    ThuePhongApi.insert(this.thuePhong).then(res => {\r\n                        this.thuePhong = {} as ThuePhong;\r\n                        this.searchParamsPhong.loaiPhongID = null as any;\r\n                        this.getDSThuePhong();\r\n                    });\r\n                }\r\n            },\r\n            themSuaDatDichVu(isUpdate: boolean, item: any) {\r\n                this.datDichVu.HoaDonID = this.hoaDon.HoaDonID;\r\n                if (isUpdate == true) {\r\n                    DatDichVuApi.detail(item.DatDichVuID).then(res => {\r\n                        this.datDichVu = res;\r\n                        this.isUpdateDichVu = true;\r\n                    });\r\n                }\r\n                else {\r\n                    if (this.isUpdateDichVu == true) {\r\n                        DatDichVuApi.update(this.datDichVu.DatDichVuID, this.datDichVu).then(res => {\r\n                            this.datDichVu = {} as DatDichVu;\r\n                            this.isUpdateDichVu = false;\r\n                            this.getDSDatDichVu();\r\n                            this.$snotify.success('Cập nhật thành công!');\r\n                        }).catch(res => {\r\n                            this.loading = false;\r\n                            this.$snotify.error('Cập nhật thất bại!');\r\n                        });\r\n                    }\r\n                    else {\r\n                        DatDichVuApi.insert(this.datDichVu).then(res => {\r\n                            this.datDichVu = {} as DatDichVu;\r\n                            this.isUpdateDichVu = false;\r\n                            this.getDSDatDichVu();\r\n                        });\r\n                    }\r\n\r\n                }\r\n            },\r\n            confirmDelete(item1: ThuePhong, item2: DatDichVu): void {\r\n                this.selectedThuePhong = item1;\r\n                this.selectedDatDichVu = item2;\r\n                this.dialogConfirmDelete = true;\r\n            },\r\n            deleteChiTietHoaDon(): void {\r\n                if (this.selectedDatDichVu != null) {\r\n                    DatDichVuApi.delete(this.selectedDatDichVu.DatDichVuID).then(res => {\r\n                        this.$snotify.success('Xóa thành công!');\r\n                        this.getDSDatDichVu();\r\n                        this.dialogConfirmDelete = false;\r\n                    }).catch(res => {\r\n                        this.$snotify.error('Xóa thất bại!');\r\n                    });\r\n                }\r\n                if (this.selectedThuePhong != null) {\r\n                    ThuePhongApi.delete(this.selectedThuePhong.ThuePhongID).then(res => {\r\n                        this.$snotify.success('Xóa thành công!');\r\n                        this.getDSThuePhong();\r\n                        this.dialogConfirmDelete = false;\r\n                    }).catch(res => {\r\n                        this.$snotify.error('Xóa thất bại!');\r\n                    });\r\n                }\r\n            },\r\n            save(): void {\r\n                this.$validator.validateAll('frmAddEdit').then((res) => {\r\n                    if (res) {\r\n                        this.hoaDon.DatPhong = undefined;\r\n                        this.hoaDon.NhanVien = undefined;\r\n                        this.hoaDon.KhachHang = undefined;\r\n                        this.hoaDon.DatDichVu = undefined;\r\n                        this.hoaDon.ThuePhong = undefined;\r\n                        if (this.isUpdate) {\r\n                            this.loading = true;\r\n                            HoaDonApi.update(this.hoaDon.HoaDonID, this.hoaDon).then(res => {\r\n                                this.loading = false;\r\n                                this.dialog = false;\r\n                                this.$emit(\"getLaiDanhSach\");\r\n                                this.$snotify.success('Cập nhật thành công!');\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Cập nhật thất bại!');\r\n                            });\r\n                        } else {\r\n                            this.loading = true;\r\n                            this.hoaDon.KhachHangID = this.khachHang.KhachHangID;\r\n                            this.hoaDon.NhanVienID = store.state.user.Profile.NhanVien.NhanVienID;\r\n                            HoaDonApi.insert(this.hoaDon).then(res => {\r\n                                this.hoaDon = res;\r\n                                this.isUpdate = true;\r\n                                this.loading = false;\r\n                                this.$emit(\"getLaiDanhSach\");\r\n                                this.$snotify.success('Thêm mới thành công!');\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Thêm mới thất bại!');\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n        }\r\n    });\r\n</script>"]}]}