{"remainingRequest":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\Phong\\DanhSachPhong.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\Phong\\DanhSachPhong.vue","mtime":1603960010000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport PhongApi, { PhongApiSearchParams } from '@/apiResources/PhongApi';\nimport { Phong } from '@/models/Phong';\nimport { LoaiPhong } from '@/models/LoaiPhong';\nimport LoaiPhongApi, { LoaiPhongApiSearchParams } from '@/apiResources/LoaiPhongApi';\nimport ThemSuaPhong from './ThemSuaPhong.vue'\nexport default Vue.extend({\n    components: {\n        ThemSuaPhong\n    },\n    data() {\n        return {\n            dsPhong: [] as Phong[],\n            dsLoaiPhong: [] as LoaiPhong[],\n            tableHeader: [\n                { text: 'STT', value: '', align: 'center', sortable: true },\n                { text: 'Số phòng', value: 'SoPhong', align: 'center', sortable: true },\n                { text: 'Tên loại phòng', value: 'LoaiPhongID', align: 'center', sortable: true },\n\n                { text: 'Trạng thái', value: 'TrangThai', align: 'center', sortable: true },\n                { text: 'Thao tác', value: '#', align: 'center', sortable: false },\n            ],\n            searchParamsPhong: { includeEntities: true, rowsPerPage: 10 } as PhongApiSearchParams,\n            searchParamsLoaiPhong: { includeEntities: true, rowsPerPage: 0 } as LoaiPhongApiSearchParams,\n            loadingTable: false,\n            selectedPhong: {} as Phong,\n            dialogConfirmDelete: false,\n        }\n    },\n    watch: {\n    },\n    created() {\n        this.getDataFromApi(this.searchParamsPhong);\n        this.getDataLoaiPhongFromApi()\n    },\n    methods: {\n        getDataFromApi(searchParamsPhong: PhongApiSearchParams): void {\n            this.loadingTable = true;\n            PhongApi.search(searchParamsPhong).then(res => {\n                this.dsPhong = res.Data;\n                this.searchParamsPhong.totalItems = res.Pagination.totalItems;\n                this.loadingTable = false;\n            });\n        },\n        getDataLoaiPhongFromApi(): void {\n            LoaiPhongApi.search(this.searchParamsLoaiPhong).then(response => {\n                this.dsLoaiPhong = response.Data;\n            })\n        },\n\n        confirmDelete(phong: Phong): void {\n            this.selectedPhong = phong;\n            this.dialogConfirmDelete = true;\n        },\n        showModalThemSua(isUpdate: boolean, item: any) { // refs gọi từ cha -=> con\n            (this.$refs.themSuaPhong as any).show(isUpdate, item); // gọi đến hàm show bên modal con\n        },\n\n        deletePhong(): void {\n            PhongApi.delete(this.selectedPhong.PhongID).then(res => {\n                this.$snotify.success('Xóa thành công!');\n                this.getDataFromApi(this.searchParamsPhong);\n                this.dialogConfirmDelete = false;\n            }).catch(res => {\n                this.$snotify.error('Xóa thất bại!');\n            });\n        },\n    }\n});\n",{"version":3,"sources":["DanhSachPhong.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DanhSachPhong.vue","sourceRoot":"src\\components\\Phong","sourcesContent":["<template>\r\n    <v-card width=\"100%\" style=\"padding: 20px\">\r\n        <v-layout row wrap>\r\n            <v-layout row wrap>\r\n                <v-flex xs12>\r\n                    <h3>Danh sách Phòng </h3>\r\n                </v-flex>\r\n                <v-flex xs12>\r\n                    <v-layout nowrap>\r\n                        <v-flex xs4>\r\n                            <v-text-field label=\"Tìm kiếm\" hide-details\r\n                                          append-icon=\"search\"\r\n                                          placeholder=\"Nhập số phòng cần tìm...\"\r\n                                          v-model=\"searchParamsPhong.query\"\r\n                                          @input=\"getDataFromApi(searchParamsPhong)\">\r\n                            </v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs4>\r\n                            <v-select v-model=\"searchParamsPhong.loaiPhongID\"\r\n                                      :items=\"dsLoaiPhong\"\r\n                                      item-text=\"TenLoaiPhong\"\r\n                                      item-value=\"LoaiPhongID\"\r\n                                      label=\"Loại phòng\"\r\n                                      placeholder=\"Chọn loại phòng\"\r\n                                      @change=\"getDataFromApi(searchParamsPhong)\"\r\n                                      hide-details\r\n                                      clearable></v-select>\r\n                        </v-flex>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn small @click=\"showModalThemSua(false,{})\" style=\"margin-top: auto\" color=\"primary\">+ Thêm mới</v-btn>\r\n                    </v-layout>\r\n                </v-flex>\r\n                <v-flex xs12>\r\n                    <v-data-table :headers=\"tableHeader\"\r\n                                  :items=\"dsPhong\"\r\n                                  @update:pagination=\"getDataFromApi\" :pagination.sync=\"searchParamsPhong\"\r\n                                  :total-items=\"searchParamsPhong.totalItems\"\r\n                                  :loading=\"loadingTable\"\r\n                                  class=\"table-border table\">\r\n                        <template slot=\"items\" slot-scope=\"props\">\r\n                            <td class=\"text-xs-center\">{{ props.index +1 }}</td>\r\n                            <td class=\"text-xs-center\">{{ props.item.SoPhong }}</td>\r\n                            <td class=\"text-xs-center\">{{ props.item.LoaiPhong ? props.item.LoaiPhong.TenLoaiPhong : \"\" }}</td>\r\n                            <td class=\"text-xs-center\">{{ props.item.TrangThai ? \"Đang sử dụng\" : \"Ngừng sử dụng\" }}</td>\r\n                            <td class=\"text-xs-center\" style=\"width:80px;\">\r\n                                <v-btn flat icon small @click=\"showModalThemSua(true, props.item)\" class=\"ma-0\">\r\n                                    <v-icon small>edit</v-icon>\r\n                                </v-btn>\r\n                                <v-btn flat color=\"red\" icon small class=\"ma-0\" @click=\"confirmDelete(props.item)\">\r\n                                    <v-icon small>delete</v-icon>\r\n                                </v-btn>\r\n                            </td>\r\n                        </template>\r\n                    </v-data-table>\r\n                </v-flex>\r\n            </v-layout>\r\n            <v-dialog v-model=\"dialogConfirmDelete\" max-width=\"290\">\r\n                <v-card>\r\n                    <v-card-title class=\"headline\">Xác nhận xóa</v-card-title>\r\n                    <v-card-text class=\"pt-3\">Bạn có chắc chắn muốn xóa?</v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn @click.native=\"dialogConfirmDelete=false\" flat>Hủy</v-btn>\r\n                        <v-btn color=\"red darken-1\" @click.native=\"deletePhong\" flat>Xác Nhận</v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n            <them-sua-phong ref=\"themSuaPhong\" @getLaiDanhSach=\"getDataFromApi(searchParamsPhong)\"></them-sua-phong>\r\n        </v-layout>\r\n    </v-card>\r\n</template>\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import PhongApi, { PhongApiSearchParams } from '@/apiResources/PhongApi';\r\n    import { Phong } from '@/models/Phong';\r\n    import { LoaiPhong } from '@/models/LoaiPhong';\r\n    import LoaiPhongApi, { LoaiPhongApiSearchParams } from '@/apiResources/LoaiPhongApi';\r\n    import ThemSuaPhong from './ThemSuaPhong.vue'\r\n    export default Vue.extend({\r\n        components: {\r\n            ThemSuaPhong\r\n        },\r\n        data() {\r\n            return {\r\n                dsPhong: [] as Phong[],\r\n                dsLoaiPhong: [] as LoaiPhong[],\r\n                tableHeader: [\r\n                    { text: 'STT', value: '', align: 'center', sortable: true },\r\n                    { text: 'Số phòng', value: 'SoPhong', align: 'center', sortable: true },\r\n                    { text: 'Tên loại phòng', value: 'LoaiPhongID', align: 'center', sortable: true },\r\n\r\n                    { text: 'Trạng thái', value: 'TrangThai', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: '#', align: 'center', sortable: false },\r\n                ],\r\n                searchParamsPhong: { includeEntities: true, rowsPerPage: 10 } as PhongApiSearchParams,\r\n                searchParamsLoaiPhong: { includeEntities: true, rowsPerPage: 0 } as LoaiPhongApiSearchParams,\r\n                loadingTable: false,\r\n                selectedPhong: {} as Phong,\r\n                dialogConfirmDelete: false,\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n        created() {\r\n            this.getDataFromApi(this.searchParamsPhong);\r\n            this.getDataLoaiPhongFromApi()\r\n        },\r\n        methods: {\r\n            getDataFromApi(searchParamsPhong: PhongApiSearchParams): void {\r\n                this.loadingTable = true;\r\n                PhongApi.search(searchParamsPhong).then(res => {\r\n                    this.dsPhong = res.Data;\r\n                    this.searchParamsPhong.totalItems = res.Pagination.totalItems;\r\n                    this.loadingTable = false;\r\n                });\r\n            },\r\n            getDataLoaiPhongFromApi(): void {\r\n                LoaiPhongApi.search(this.searchParamsLoaiPhong).then(response => {\r\n                    this.dsLoaiPhong = response.Data;\r\n                })\r\n            },\r\n\r\n            confirmDelete(phong: Phong): void {\r\n                this.selectedPhong = phong;\r\n                this.dialogConfirmDelete = true;\r\n            },\r\n            showModalThemSua(isUpdate: boolean, item: any) { // refs gọi từ cha -=> con\r\n                (this.$refs.themSuaPhong as any).show(isUpdate, item); // gọi đến hàm show bên modal con\r\n            },\r\n\r\n            deletePhong(): void {\r\n                PhongApi.delete(this.selectedPhong.PhongID).then(res => {\r\n                    this.$snotify.success('Xóa thành công!');\r\n                    this.getDataFromApi(this.searchParamsPhong);\r\n                    this.dialogConfirmDelete = false;\r\n                }).catch(res => {\r\n                    this.$snotify.error('Xóa thất bại!');\r\n                });\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}