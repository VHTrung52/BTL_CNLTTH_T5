{"remainingRequest":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\DatDichVu\\ThemSuaDatDichVu.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\DatDichVu\\ThemSuaDatDichVu.vue","mtime":1603956408954},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603956549663},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603956549663},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport DatPhongApi, { DatPhongApiSearchParams } from '@/apiResources/DatPhongApi';\nimport { DatPhong } from '@/models/DatPhong';\nimport { DichVu } from '@/models/DichVu';\nimport DichVuApi, { DichVuApiSearchParams } from '@/apiResources/DichVuApi';\nimport store from '@/store/store';\n\nexport default Vue.extend({\n    $_veeValidate: {\n        validator: 'new'\n    },\n    components: {},\n    data() {\n        return {\n            dialog: false,\n            isUpdate: false,\n            datPhong: {} as DatPhong,\n            dsDichVu: [] as DichVu[],\n            dsHoaDonLoading: false,\n            searchHoaDon: '',\n            loading: false,\n            searchParamsDatPhong: {} as DatPhongApiSearchParams,\n        }\n    },\n    watch: {\n    },\n    created() {\n        this.getDichVu();\n    },\n    mounted() {\n    },\n    methods: {\n        show(isUpdate: boolean, item: any) {\n            this.isUpdate = isUpdate;\n            this.datPhong = item;\n            this.dialog = true;\n        },\n        getDichVu(): void {\n            var search = {} as DichVuApiSearchParams;\n            DichVuApi.search(search).then(\n                res => {\n                    this.dsDichVu = res.Data;\n                });\n        },\n        getDataFromApi(id: number): void {\n            DatPhongApi.detail(id).then(res => {\n                this.datPhong = res;\n            });\n        },\n        save(): void {\n            this.$validator.validateAll('frmAddEdit').then((res) => {\n                if (res) {\n                    this.datPhong.DichVu = undefined;\n                    if (this.datPhong.TrangThai == 2)\n                        this.datPhong.NhanVienID = store.state.user.Profile.NhanVien.NhanVienID;\n                    if (this.isUpdate) {\n                        this.loading = true;\n                        DatPhongApi.update(this.datPhong.DatPhongID, this.datPhong).then(res => {\n                            this.loading = false;\n                            this.$eventBus.$emit('getSoKhachDatDichVu');\n                            this.$emit(\"getDatPhong\");\n                            this.dialog = false;\n                            this.$snotify.success('Cập nhật thành công!');\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Cập nhật thất bại!');\n                        });\n                    } else {\n                        this.loading = true;\n                        DatPhongApi.insert(this.datPhong).then(res => {\n                            this.datPhong = res;\n                            this.isUpdate = true;\n                            this.$eventBus.$emit('getSoKhachDatDichVu');\n                            this.$emit(\"getDatPhong\");\n                            this.dialog = false;\n                            this.loading = false;\n                            this.$snotify.success('Thêm mới thành công!');\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Thêm mới thất bại!');\n                        });\n                    }\n                }\n                else {\n                    this.$snotify.warning('Vui lòng nhập đủ thông tin!');\n                }\n            });\n        },\n    }\n});\n",{"version":3,"sources":["ThemSuaDatDichVu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThemSuaDatDichVu.vue","sourceRoot":"src\\components\\DatDichVu","sourcesContent":["<template>\r\n    <v-dialog v-model=\"dialog\" width=\"600\" persistent scrollable>\r\n        <v-card>\r\n            <v-card-title class=\"primary white--text\" style=\"padding: 5px 15px 5px 15px\">\r\n                <h3>{{isUpdate ? 'Cập nhật đặt phòng' : 'Thêm mới đặt phòng'}}</h3>\r\n                <v-spacer></v-spacer>\r\n                <v-btn class=\"white--text ma-0\" small @click.native=\"dialog = false\" icon dark><v-icon>close</v-icon></v-btn>\r\n            </v-card-title>\r\n            <v-card-text>\r\n                <v-form scope=\"frmAddEdit\">\r\n                    <v-layout row wrap>\r\n                        <v-flex xs6 style=\"padding-right: 15px\">\r\n                            <v-autocomplete v-model=\"datPhong.DichVuID\"\r\n                                            :items=\"dsDichVu\"\r\n                                            item-text=\"TenDichVu\"\r\n                                            item-value=\"DichVuID\"\r\n                                            label=\"Dịch vụ\"\r\n                                            placeholder=\"Chọn dịch vụ\"\r\n                                            :error-messages=\"errors.collect('Dịch vụ', 'frmAddEdit')\"\r\n                                            v-validate=\"'required'\"\r\n                                            data-vv-scope=\"frmAddEdit\"\r\n                                            data-vv-name=\"Dịch vụ\"\r\n                                            clearable></v-autocomplete>\r\n                        </v-flex>\r\n                        <v-flex xs6 style=\"padding-right: 15px\">\r\n                            <v-datetimepicker v-model=\"datPhong.ThoiGianDat\"\r\n                                              label=\"Ngày đặt\"\r\n                                              required\r\n                                              type=\"datetime-local\"\r\n                                              :error-messages=\"errors.collect('Ngày đặt', 'frmAddEdit')\"\r\n                                              v-validate=\"'required'\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Ngày đặt\"\r\n                                              clearable></v-datetimepicker>\r\n                        </v-flex>\r\n                        <v-flex xs6 style=\"padding-right: 15px\">\r\n                            <v-text-field v-model=\"datPhong.HoTen\"\r\n                                          label=\"Họ tên\"\r\n                                          :error-messages=\"errors.collect('Họ tên', 'frmAddEdit')\"\r\n                                          v-validate=\"'required'\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"Họ tên\"\r\n                                          clearable></v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs6 style=\"padding-right: 15px\">\r\n                            <v-text-field v-model=\"datPhong.SoDienThoai\"\r\n                                          label=\"Số điện thoại\"\r\n                                          :error-messages=\"errors.collect('Số điện thoại', 'frmAddEdit')\"\r\n                                          v-validate=\"'required|numeric'\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"Số điện thoại\"\r\n                                          clearable></v-text-field>\r\n                        </v-flex>\r\n\r\n                        <v-flex xs6 style=\"padding-right: 15px\">\r\n                            <v-text-field v-model=\"datPhong.SoLuongNguoi\"\r\n                                          label=\"Số lượng người\"\r\n                                          type=\"number\"\r\n                                          :error-messages=\"errors.collect('Số lượng người', 'frmAddEdit')\"\r\n                                          v-validate=\"''\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"Số lượng người\"\r\n                                          clearable></v-text-field>\r\n                        </v-flex><br />\r\n                     \r\n                        <v-flex xs6 style=\"padding-right: 15px\">\r\n                            <v-text-field v-model=\"datPhong.TienCoc\"\r\n                                          label=\"Tiền cọc\"\r\n                                          type=\"number\" :min=\"0\"\r\n                                          :error-messages=\"errors.collect('Tiền cọc', 'frmAddEdit')\"\r\n                                          v-validate=\"''\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"Tiền cọc\"\r\n                                          clearable></v-text-field>\r\n                        </v-flex>\r\n                        <v-flex xs12>\r\n                            <v-radio-group style=\"margin:auto\" hide-details v-if=\"isUpdate\" v-model=\"datPhong.TrangThai\" label=\"Trạng thái: \" row>\r\n                                <v-radio label=\"Đã đặt\" :value=\"0\"></v-radio>\r\n                                <v-radio label=\"Đã nhận\" :value=\"1\"></v-radio>\r\n                                <v-radio label=\"Đã hủy\" :value=\"2\"></v-radio>\r\n                            </v-radio-group>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn class=\"primary\" :disabled=\"loading\" :loading=\"loading\" @click.native=\"save\">{{isUpdate?'Cập nhật':'Thêm mới'}}</v-btn>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import DatPhongApi, { DatPhongApiSearchParams } from '@/apiResources/DatPhongApi';\r\n    import { DatPhong } from '@/models/DatPhong';\r\n    import { DichVu } from '@/models/DichVu';\r\n    import DichVuApi, { DichVuApiSearchParams } from '@/apiResources/DichVuApi';\r\n    import store from '@/store/store';\r\n\r\n    export default Vue.extend({\r\n        $_veeValidate: {\r\n            validator: 'new'\r\n        },\r\n        components: {},\r\n        data() {\r\n            return {\r\n                dialog: false,\r\n                isUpdate: false,\r\n                datPhong: {} as DatPhong,\r\n                dsDichVu: [] as DichVu[],\r\n                dsHoaDonLoading: false,\r\n                searchHoaDon: '',\r\n                loading: false,\r\n                searchParamsDatPhong: {} as DatPhongApiSearchParams,\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n        created() {\r\n            this.getDichVu();\r\n        },\r\n        mounted() {\r\n        },\r\n        methods: {\r\n            show(isUpdate: boolean, item: any) {\r\n                this.isUpdate = isUpdate;\r\n                this.datPhong = item;\r\n                this.dialog = true;\r\n            },\r\n            getDichVu(): void {\r\n                var search = {} as DichVuApiSearchParams;\r\n                DichVuApi.search(search).then(\r\n                    res => {\r\n                        this.dsDichVu = res.Data;\r\n                    });\r\n            },\r\n            getDataFromApi(id: number): void {\r\n                DatPhongApi.detail(id).then(res => {\r\n                    this.datPhong = res;\r\n                });\r\n            },\r\n            save(): void {\r\n                this.$validator.validateAll('frmAddEdit').then((res) => {\r\n                    if (res) {\r\n                        this.datPhong.DichVu = undefined;\r\n                        if (this.datPhong.TrangThai == 2)\r\n                            this.datPhong.NhanVienID = store.state.user.Profile.NhanVien.NhanVienID;\r\n                        if (this.isUpdate) {\r\n                            this.loading = true;\r\n                            DatPhongApi.update(this.datPhong.DatPhongID, this.datPhong).then(res => {\r\n                                this.loading = false;\r\n                                this.$eventBus.$emit('getSoKhachDatDichVu');\r\n                                this.$emit(\"getDatPhong\");\r\n                                this.dialog = false;\r\n                                this.$snotify.success('Cập nhật thành công!');\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Cập nhật thất bại!');\r\n                            });\r\n                        } else {\r\n                            this.loading = true;\r\n                            DatPhongApi.insert(this.datPhong).then(res => {\r\n                                this.datPhong = res;\r\n                                this.isUpdate = true;\r\n                                this.$eventBus.$emit('getSoKhachDatDichVu');\r\n                                this.$emit(\"getDatPhong\");\r\n                                this.dialog = false;\r\n                                this.loading = false;\r\n                                this.$snotify.success('Thêm mới thành công!');\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Thêm mới thất bại!');\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.$snotify.warning('Vui lòng nhập đủ thông tin!');\r\n                    }\r\n                });\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}