{"remainingRequest":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\src\\components\\PhieuNhapKho\\ThemSuaPhieuNhapKho.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\src\\components\\PhieuNhapKho\\ThemSuaPhieuNhapKho.vue","mtime":1603960010000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\TestFinal\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport PhieuNhapKhoApi, { PhieuNhapKhoApiSearchParams } from '@/apiResources/PhieuNhapKhoApi';\nimport { PhieuNhapKho } from '@/models/PhieuNhapKho';\nimport { ChiTietPhieuNhap } from '@/models/ChiTietPhieuNhap';\nimport ChiTietPhieuNhapApi, { ChiTietPhieuNhapApiSearchParams } from '@/apiResources/ChiTietPhieuNhapApi';\nimport { NhanVien } from '@/models/NhanVien';\nimport NhanVienApi, { NhanVienApiSearchParams } from '@/apiResources/NhanVienApi';\nimport { VatDung } from '@/models/VatDung';\nimport VatDungApi, { VatDungApiSearchParams } from '@/apiResources/VatDungApi';\nimport store from '@/store/store';\n\nexport default Vue.extend({\n    $_veeValidate: {\n        validator: 'new'\n    },\n    components: {\n    },\n    data() {\n        return {\n            dialog: false,\n            isUpdate: false,\n            dsNhanVien: [] as NhanVien[],\n            phieuNhapKho: {} as PhieuNhapKho,\n            chiTietPhieuNhap: {} as ChiTietPhieuNhap,\n            dsChiTietPhieuNhap: [] as ChiTietPhieuNhap[],\n            selectedPhieuNhapKho: {} as ChiTietPhieuNhap,\n            searchVatDung: {} as VatDungApiSearchParams,\n            dsVatDung: [] as VatDung[],\n            searchChiTietPhieuNhap: '',\n            searchParamsChiTietPhieuNhap: { includeEntities: true } as ChiTietPhieuNhapApiSearchParams,\n            tableHeaderChiTietPhieuNhap: [\n                { text: 'STT', value: 'ChiTietPhieuNhapID', align: 'center', sortable: true },\n                { text: 'Vật dụng', value: 'VatDung', align: 'center', sortable: true },\n                { text: 'Số lượng', value: 'SoLuong', align: 'center', sortable: true },\n                { text: 'Giá nhập', value: 'GiaNhap', align: 'center', sortable: true },\n                { text: 'Ghi chú', value: 'GhiChu', align: 'center', sortable: true },\n                { text: 'Thao tác', value: '#', align: 'center', sortable: true },\n            ],\n            dialogConfirmDelete: false,\n            searchParamsPhieuNhapKho: { phieuNhapID: null as any } as PhieuNhapKhoApiSearchParams,\n            isUpdateChiTiet: false,\n            TongTien: 0,\n        }\n    },\n    watch: {\n    },\n    created() {\n        this.getNhanVien();\n        this.getVatDung();\n    },\n    mounted() {\n    },\n    methods: {\n        show(isUpdate: boolean, item: any): void {\n            this.dialog = true;\n            this.isUpdate = isUpdate;\n            this.isUpdateChiTiet = false;\n            this.chiTietPhieuNhap = {} as ChiTietPhieuNhap;\n            this.dsChiTietPhieuNhap = [] as ChiTietPhieuNhap[];\n            this.phieuNhapKho = Object.assign({}, item);\n            if (isUpdate) {\n                this.searchParamsChiTietPhieuNhap.phieuNhapID = this.phieuNhapKho.PhieuNhapID;\n                ChiTietPhieuNhapApi.search(this.searchParamsChiTietPhieuNhap).then(res => {\n                    this.dsChiTietPhieuNhap = res.Data;\n                });\n            }\n        },\n        getVatDung(): void {\n            this.searchVatDung = {} as VatDungApiSearchParams;\n            VatDungApi.search(this.searchVatDung).then(\n                res => {\n                    this.dsVatDung = res.Data;\n                }\n            )\n        },\n        showChiTiet(item: any): void {\n            this.chiTietPhieuNhap = item;\n            this.isUpdateChiTiet = true;\n            this.TongTien = this.chiTietPhieuNhap.GiaNhap * this.chiTietPhieuNhap.SoLuong;\n        },\n        getDataFromApi(id: number): void {\n            PhieuNhapKhoApi.detail(id).then(res => {\n                this.phieuNhapKho = res;\n            });\n        },\n        getDanhSachChiTiet(): void {\n            this.searchParamsChiTietPhieuNhap.phieuNhapID = this.phieuNhapKho.PhieuNhapID;\n            ChiTietPhieuNhapApi.search(this.searchParamsChiTietPhieuNhap).then(res => {\n                this.dsChiTietPhieuNhap = res.Data;\n            });\n        },\n        getNhanVien(): void {\n            var search = {} as NhanVienApiSearchParams;\n            NhanVienApi.search(search).then(res => {\n                this.dsNhanVien = res.Data;\n            });\n        },\n        save(): void {\n            this.phieuNhapKho.NhanVienID = store.state.user.Profile.NhanVien.NhanVienID;\n            PhieuNhapKhoApi.update(this.phieuNhapKho.PhieuNhapID, this.phieuNhapKho).then(res => {\n                this.dialog = false;\n                this.$emit(\"getLaiDanhSach\");\n                this.isUpdate = false;\n                //this.$snotify.success('Cập nhật thành công!');\n            }).catch(res => {\n                this.dialog = false;\n                //this.$snotify.error('Cập nhật thất bại!');\n            });\n        },\n        saveChiTiet(): void {\n            if (this.chiTietPhieuNhap.SoLuong <= 0 || this.chiTietPhieuNhap.GiaNhap <= 0) {\n                this.$snotify.error(\"Giá trị không thể bé hơn 0!\");\n                return;\n            }\n            this.$validator.validateAll('frmAddEdit').then((res) => {\n                if (res) {\n                    this.phieuNhapKho.TongTien += this.chiTietPhieuNhap.GiaNhap * this.chiTietPhieuNhap.SoLuong - this.TongTien;\n                    this.chiTietPhieuNhap.PhieuNhapID = this.phieuNhapKho.PhieuNhapID;\n                    if (this.isUpdateChiTiet) {\n                        ChiTietPhieuNhapApi.update(this.chiTietPhieuNhap.ChiTietPhieuNhapID, this.chiTietPhieuNhap).then(res => {\n                            this.chiTietPhieuNhap = {} as ChiTietPhieuNhap;\n                            this.isUpdateChiTiet = false;\n                            this.getDanhSachChiTiet();\n                            this.TongTien = 0;\n                            this.$snotify.success('Cập nhật thành công!');\n                        }).catch(res => {\n                            this.$snotify.error('Cập nhật thất bại!');\n                        });\n                    } else {\n                        ChiTietPhieuNhapApi.insert(this.chiTietPhieuNhap).then(res => {\n                            this.getDanhSachChiTiet();\n                            this.chiTietPhieuNhap = {} as ChiTietPhieuNhap;\n                            this.TongTien = 0;\n                            this.$snotify.success('Thêm mới thành công!');\n                        }).catch(res => {\n                            this.$snotify.error('Thêm mới thất bại!');\n                        });\n                    }\n                }\n            });\n        },\n        deleteChiTiet(item: any): void {\n            if (confirm(\"Do you really want to delete?\")) {\n                this.phieuNhapKho.TongTien -= item.SoLuong * item.GiaNhap;\n                ChiTietPhieuNhapApi.delete(item.ChiTietPhieuNhapID).then(res => {\n                    this.$snotify.success('Xóa thành công!');\n                    this.searchParamsChiTietPhieuNhap.phieuNhapID = this.phieuNhapKho.PhieuNhapID;\n                    ChiTietPhieuNhapApi.search(this.searchParamsChiTietPhieuNhap).then(res => {\n                        this.dsChiTietPhieuNhap = res.Data;\n                    });\n                    this.dialogConfirmDelete = false;\n                }).catch(res => {\n                    this.$snotify.error('Xóa thất bại!');\n                });\n            }\n        },\n    }\n});\n",{"version":3,"sources":["ThemSuaPhieuNhapKho.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThemSuaPhieuNhapKho.vue","sourceRoot":"src\\components\\PhieuNhapKho","sourcesContent":["<template>\r\n    <v-dialog persistent v-model=\"dialog\" width=\"800\">\r\n        <v-card>\r\n            <v-card-title class=\"primary white--text\" style=\"height: 3.5em\">\r\n                <v-flex>\r\n                    <h3 style=\"margin: auto\">{{isUpdate ? 'CẬP NHẬT PHIẾU NHẬP KHO' : 'NHẬP KHO'}}</h3>\r\n                </v-flex>\r\n                <v-spacer></v-spacer>\r\n                <v-flex>\r\n                    <div class=\"text-xs-right\">\r\n                        <v-btn class=\"white--text ma-0\" small @click=\"save()\" icon dark><v-icon>close</v-icon></v-btn>\r\n                    </div>\r\n                </v-flex>\r\n            </v-card-title>\r\n            <v-card-text>\r\n                <v-form scope=\"frmAddEdit\">\r\n                    <v-layout row wrap>\r\n                        <v-flex xs6 sm4 md4 style=\"padding-right: 1.5em\">\r\n                            <v-datepicker v-model=\"phieuNhapKho.NgayNhap\"\r\n                                          label=\"Ngày nhập\"\r\n                                          type=\"date\"\r\n                                          :error-messages=\"errors.collect('NgayNhap', 'frmAddEdit')\"\r\n                                          v-validate=\"'required'\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"NgayNhap|moment('DD/MM/YYYY')\"\r\n                                          clearable>\r\n                            </v-datepicker>\r\n                        </v-flex>\r\n                        <v-flex xs12>\r\n                            <h3>Chi tiết phiếu nhập</h3>\r\n                        </v-flex>\r\n                        <v-flex xs12>\r\n                            <v-layout row wrap>\r\n                                <v-flex xs6 sm4 md4 style=\"padding-right: 1.5em\">\r\n                                    <v-autocomplete v-model=\"chiTietPhieuNhap.ThuocTinhID\"\r\n                                                    :items=\"dsVatDung\"\r\n                                                    item-text=\"TenVatDung\"\r\n                                                    item-value=\"VatDungID\"\r\n                                                    label=\"Vật dụng\"\r\n                                                    placeholder=\"Vật dụng\"\r\n                                                    :error-messages=\"errors.collect('ThuocTinhID', 'frmAddEdit')\"\r\n                                                    v-validate=\"'required'\"\r\n                                                    data-vv-scope=\"frmAddEdit\"\r\n                                                    data-vv-name=\"ThuocTinhID\"\r\n                                                    clearable></v-autocomplete>\r\n                                </v-flex>\r\n                                <v-flex xs6 sm4 md4 style=\"padding-right: 1.5em\">\r\n                                    <v-text-field v-model=\"chiTietPhieuNhap.SoLuong\"\r\n                                                  label=\"Số lượng\"\r\n                                                  type=\"number\"\r\n                                                  :error-messages=\"errors.collect('SoLuong', 'frmAddEdit')\"\r\n                                                  v-validate=\"'required'\"\r\n                                                  data-vv-scope=\"frmAddEdit\"\r\n                                                  data-vv-name=\"SoLuong\"\r\n                                                  clearable></v-text-field>\r\n                                </v-flex>\r\n                                <v-flex xs6 sm4 md4 style=\"padding-right: 1.5em\">\r\n                                    <v-text-field v-model=\"chiTietPhieuNhap.GiaNhap\"\r\n                                                  label=\"Giá nhập\"\r\n                                                  type=\"number\"\r\n                                                  :error-messages=\"errors.collect('GiaNhap', 'frmAddEdit')\"\r\n                                                  v-validate=\"'required'\"\r\n                                                  data-vv-scope=\"frmAddEdit\"\r\n                                                  data-vv-name=\"GiaNhap\"\r\n                                                  clearable></v-text-field>\r\n                                </v-flex>\r\n                                <v-flex xs10 style=\"padding-right: 1.5em\">\r\n                                    <v-text-field v-model=\"chiTietPhieuNhap.GhiChu\"\r\n                                                  label=\"Ghi chú\"\r\n                                                  type=\"text\"\r\n                                                  :error-messages=\"errors.collect('GhiChu', 'frmAddEdit')\"\r\n                                                  v-validate=\"''\"\r\n                                                  data-vv-scope=\"frmAddEdit\"\r\n                                                  data-vv-name=\"GhiChu\"\r\n                                                  clearable></v-text-field>\r\n                                </v-flex>\r\n                                <v-spacer></v-spacer>\r\n                                <v-btn style=\"margin-top: 20px\" small class=\"primary\" @click.native=\"saveChiTiet\">Lưu</v-btn>\r\n                            </v-layout>\r\n                        </v-flex>\r\n\r\n                        <v-flex xs12>\r\n                            <v-data-table :headers=\"tableHeaderChiTietPhieuNhap\"\r\n                                          :items=\"dsChiTietPhieuNhap\"\r\n                                          :total-items=\"searchParamsChiTietPhieuNhap.totalItems\"\r\n                                          class=\"table-border table\">\r\n                                <template slot=\"items\" slot-scope=\"props\">\r\n                                    <td>{{ props.index + 1 }}</td>\r\n                                    <td>{{ props.item.VatDung.TenVatDung }}</td>\r\n                                    <td>{{ props.item.SoLuong }}</td>\r\n                                    <td>{{ props.item.GiaNhap }}</td>\r\n                                    <td>{{ props.item.GhiChu }}</td>\r\n                                    <td class=\"text-xs-center\" style=\"width:80px;\">\r\n                                        <v-btn flat icon small @click=\"showChiTiet(props.item)\" class=\"ma-0\">\r\n                                            <v-icon small>edit</v-icon>\r\n                                        </v-btn>\r\n                                        <a v-on:click=\"deleteChiTiet(props.item)\"><v-icon small>delete</v-icon></a>\r\n\r\n                                    </td>\r\n                                </template>\r\n                            </v-data-table>\r\n                        </v-flex>\r\n                        <v-flex xs6 sm4 md4 style=\"padding-right: 1.5em\">\r\n                            <v-text-field v-model=\"phieuNhapKho.TongTien\"\r\n                                          label=\"Tổng tiền\"\r\n                                          type=\"number\"\r\n                                          disabled\r\n                                          :error-messages=\"errors.collect('TongTien', 'frmAddEdit')\"\r\n                                          v-validate=\"''\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"TongTien\"\r\n                                          clearable></v-text-field>\r\n                        </v-flex>\r\n                    </v-layout>\r\n                </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn class=\"primary\" @click=\"save()\">Đóng</v-btn>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import PhieuNhapKhoApi, { PhieuNhapKhoApiSearchParams } from '@/apiResources/PhieuNhapKhoApi';\r\n    import { PhieuNhapKho } from '@/models/PhieuNhapKho';\r\n    import { ChiTietPhieuNhap } from '@/models/ChiTietPhieuNhap';\r\n    import ChiTietPhieuNhapApi, { ChiTietPhieuNhapApiSearchParams } from '@/apiResources/ChiTietPhieuNhapApi';\r\n    import { NhanVien } from '@/models/NhanVien';\r\n    import NhanVienApi, { NhanVienApiSearchParams } from '@/apiResources/NhanVienApi';\r\n    import { VatDung } from '@/models/VatDung';\r\n    import VatDungApi, { VatDungApiSearchParams } from '@/apiResources/VatDungApi';\r\n    import store from '@/store/store';\r\n\r\n    export default Vue.extend({\r\n        $_veeValidate: {\r\n            validator: 'new'\r\n        },\r\n        components: {\r\n        },\r\n        data() {\r\n            return {\r\n                dialog: false,\r\n                isUpdate: false,\r\n                dsNhanVien: [] as NhanVien[],\r\n                phieuNhapKho: {} as PhieuNhapKho,\r\n                chiTietPhieuNhap: {} as ChiTietPhieuNhap,\r\n                dsChiTietPhieuNhap: [] as ChiTietPhieuNhap[],\r\n                selectedPhieuNhapKho: {} as ChiTietPhieuNhap,\r\n                searchVatDung: {} as VatDungApiSearchParams,\r\n                dsVatDung: [] as VatDung[],\r\n                searchChiTietPhieuNhap: '',\r\n                searchParamsChiTietPhieuNhap: { includeEntities: true } as ChiTietPhieuNhapApiSearchParams,\r\n                tableHeaderChiTietPhieuNhap: [\r\n                    { text: 'STT', value: 'ChiTietPhieuNhapID', align: 'center', sortable: true },\r\n                    { text: 'Vật dụng', value: 'VatDung', align: 'center', sortable: true },\r\n                    { text: 'Số lượng', value: 'SoLuong', align: 'center', sortable: true },\r\n                    { text: 'Giá nhập', value: 'GiaNhap', align: 'center', sortable: true },\r\n                    { text: 'Ghi chú', value: 'GhiChu', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: '#', align: 'center', sortable: true },\r\n                ],\r\n                dialogConfirmDelete: false,\r\n                searchParamsPhieuNhapKho: { phieuNhapID: null as any } as PhieuNhapKhoApiSearchParams,\r\n                isUpdateChiTiet: false,\r\n                TongTien: 0,\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n        created() {\r\n            this.getNhanVien();\r\n            this.getVatDung();\r\n        },\r\n        mounted() {\r\n        },\r\n        methods: {\r\n            show(isUpdate: boolean, item: any): void {\r\n                this.dialog = true;\r\n                this.isUpdate = isUpdate;\r\n                this.isUpdateChiTiet = false;\r\n                this.chiTietPhieuNhap = {} as ChiTietPhieuNhap;\r\n                this.dsChiTietPhieuNhap = [] as ChiTietPhieuNhap[];\r\n                this.phieuNhapKho = Object.assign({}, item);\r\n                if (isUpdate) {\r\n                    this.searchParamsChiTietPhieuNhap.phieuNhapID = this.phieuNhapKho.PhieuNhapID;\r\n                    ChiTietPhieuNhapApi.search(this.searchParamsChiTietPhieuNhap).then(res => {\r\n                        this.dsChiTietPhieuNhap = res.Data;\r\n                    });\r\n                }\r\n            },\r\n            getVatDung(): void {\r\n                this.searchVatDung = {} as VatDungApiSearchParams;\r\n                VatDungApi.search(this.searchVatDung).then(\r\n                    res => {\r\n                        this.dsVatDung = res.Data;\r\n                    }\r\n                )\r\n            },\r\n            showChiTiet(item: any): void {\r\n                this.chiTietPhieuNhap = item;\r\n                this.isUpdateChiTiet = true;\r\n                this.TongTien = this.chiTietPhieuNhap.GiaNhap * this.chiTietPhieuNhap.SoLuong;\r\n            },\r\n            getDataFromApi(id: number): void {\r\n                PhieuNhapKhoApi.detail(id).then(res => {\r\n                    this.phieuNhapKho = res;\r\n                });\r\n            },\r\n            getDanhSachChiTiet(): void {\r\n                this.searchParamsChiTietPhieuNhap.phieuNhapID = this.phieuNhapKho.PhieuNhapID;\r\n                ChiTietPhieuNhapApi.search(this.searchParamsChiTietPhieuNhap).then(res => {\r\n                    this.dsChiTietPhieuNhap = res.Data;\r\n                });\r\n            },\r\n            getNhanVien(): void {\r\n                var search = {} as NhanVienApiSearchParams;\r\n                NhanVienApi.search(search).then(res => {\r\n                    this.dsNhanVien = res.Data;\r\n                });\r\n            },\r\n            save(): void {\r\n                this.phieuNhapKho.NhanVienID = store.state.user.Profile.NhanVien.NhanVienID;\r\n                PhieuNhapKhoApi.update(this.phieuNhapKho.PhieuNhapID, this.phieuNhapKho).then(res => {\r\n                    this.dialog = false;\r\n                    this.$emit(\"getLaiDanhSach\");\r\n                    this.isUpdate = false;\r\n                    //this.$snotify.success('Cập nhật thành công!');\r\n                }).catch(res => {\r\n                    this.dialog = false;\r\n                    //this.$snotify.error('Cập nhật thất bại!');\r\n                });\r\n            },\r\n            saveChiTiet(): void {\r\n                if (this.chiTietPhieuNhap.SoLuong <= 0 || this.chiTietPhieuNhap.GiaNhap <= 0) {\r\n                    this.$snotify.error(\"Giá trị không thể bé hơn 0!\");\r\n                    return;\r\n                }\r\n                this.$validator.validateAll('frmAddEdit').then((res) => {\r\n                    if (res) {\r\n                        this.phieuNhapKho.TongTien += this.chiTietPhieuNhap.GiaNhap * this.chiTietPhieuNhap.SoLuong - this.TongTien;\r\n                        this.chiTietPhieuNhap.PhieuNhapID = this.phieuNhapKho.PhieuNhapID;\r\n                        if (this.isUpdateChiTiet) {\r\n                            ChiTietPhieuNhapApi.update(this.chiTietPhieuNhap.ChiTietPhieuNhapID, this.chiTietPhieuNhap).then(res => {\r\n                                this.chiTietPhieuNhap = {} as ChiTietPhieuNhap;\r\n                                this.isUpdateChiTiet = false;\r\n                                this.getDanhSachChiTiet();\r\n                                this.TongTien = 0;\r\n                                this.$snotify.success('Cập nhật thành công!');\r\n                            }).catch(res => {\r\n                                this.$snotify.error('Cập nhật thất bại!');\r\n                            });\r\n                        } else {\r\n                            ChiTietPhieuNhapApi.insert(this.chiTietPhieuNhap).then(res => {\r\n                                this.getDanhSachChiTiet();\r\n                                this.chiTietPhieuNhap = {} as ChiTietPhieuNhap;\r\n                                this.TongTien = 0;\r\n                                this.$snotify.success('Thêm mới thành công!');\r\n                            }).catch(res => {\r\n                                this.$snotify.error('Thêm mới thất bại!');\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            deleteChiTiet(item: any): void {\r\n                if (confirm(\"Do you really want to delete?\")) {\r\n                    this.phieuNhapKho.TongTien -= item.SoLuong * item.GiaNhap;\r\n                    ChiTietPhieuNhapApi.delete(item.ChiTietPhieuNhapID).then(res => {\r\n                        this.$snotify.success('Xóa thành công!');\r\n                        this.searchParamsChiTietPhieuNhap.phieuNhapID = this.phieuNhapKho.PhieuNhapID;\r\n                        ChiTietPhieuNhapApi.search(this.searchParamsChiTietPhieuNhap).then(res => {\r\n                            this.dsChiTietPhieuNhap = res.Data;\r\n                        });\r\n                        this.dialogConfirmDelete = false;\r\n                    }).catch(res => {\r\n                        this.$snotify.error('Xóa thất bại!');\r\n                    });\r\n                }\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}