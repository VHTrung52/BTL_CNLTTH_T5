{"remainingRequest":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\Phong\\ThemSuaPhong.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\Phong\\ThemSuaPhong.vue","mtime":1603960010000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537925844},{"path":"D:\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport PhongApi, { PhongApiSearchParams } from '@/apiResources/PhongApi';\nimport { Phong } from '@/models/Phong';\nimport { VatDungPhong } from '@/models/VatDungPhong';\nimport VatDungPhongApi, { VatDungPhongApiSearchParams } from '@/apiResources/VatDungPhongApi';\nimport { LoaiPhong } from '@/models/LoaiPhong';\nimport LoaiPhongApi, { LoaiPhongApiSearchParams } from '@/apiResources/LoaiPhongApi';\nimport { VatDung } from '@/models/VatDung';\nimport VatDungApi, { VatDungApiSearchParams } from '@/apiResources/VatDungApi';\nexport default Vue.extend({\n    $_veeValidate: {\n        validator: 'new'\n    },\n    components: {},\n    data() {\n        return {\n            dialog: false,\n            searchParamsVatDungPhong: { includeEntities: true } as VatDungPhongApiSearchParams,\n            dsVatDung: [] as VatDung[],\n            isUpdateVatDungPhong: false,\n            searchLoaiPhong: '',\n            dsLoaiPhong: [] as LoaiPhong[],\n            isUpdate: false,\n            phong: { VatDungPhong: [] as VatDungPhong[] } as Phong,\n            vatDungPhong: {\n                VatDung: {} as VatDung\n            } as VatDungPhong,\n            searchParamsLoaiPhong: { includeEntities: true } as LoaiPhongApiSearchParams,\n            selectedVatDungPhong: {} as VatDungPhong,\n            dialogConfirmDeleteVatDungPhong: false,\n            dsVatDungPhong: [] as VatDungPhong[],\n            dsVatDungPhongLoading: false,\n            searchParamsVatDung: { includeEntities: true } as VatDungApiSearchParams,\n            tableHeaderVatDungPhong: [\n                { text: 'STT', value: '', align: 'center', sortable: true },\n                { text: 'Tên vật dụng', value: 'VatDungPhongID', align: 'center', sortable: true },\n                { text: 'Số lượng', value: 'SoLuong', align: 'center', sortable: true },\n                { text: 'Ghi chú', value: 'GhiChu', align: 'center', sortable: true },\n                { text: 'Thao tác', value: '#', align: 'center', sortable: false },\n            ],\n            loading: false,\n            searchParamsPhong: {} as PhongApiSearchParams,\n        }\n    },\n    watch: {\n    },\n\n\n    created() {\n        this.getDataVatDungFromApi();\n        this.getDataLoaiPhongFromApi();\n    },\n    methods: {\n        show(isUpdate: boolean, item: any) {\n            this.dialog = true;\n            this.$validator.errors.clear(\"frmAddEdit\");\n            this.isUpdate = isUpdate;\n            this.vatDungPhong = {} as VatDungPhong;\n            this.dsVatDungPhong = [] as VatDungPhong[];\n            if (isUpdate == true)\n                this.getDataFromApi(item.PhongID);\n            else\n                this.phong = {} as Phong;\n        },\n\n        getDataFromApi(id: number): void {\n            PhongApi.detail(id).then(res => {\n                this.phong = res;\n                this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\n\n            });\n        },\n        confirmDeleteVatDungPhong(vatDungPhong: VatDungPhong): void {\n            this.selectedVatDungPhong = vatDungPhong;\n            this.dialogConfirmDeleteVatDungPhong = true;\n        },\n        deleteVatDungPhong(): void {\n            if (this.selectedVatDungPhong.VatDungPhongID != null) {\n                VatDungPhongApi.delete(this.selectedVatDungPhong.VatDungPhongID).then(res => {\n                    this.$snotify.success('Xóa thành công!');\n                    this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\n                    this.dialogConfirmDeleteVatDungPhong = false;\n                }).catch(res => {\n                    this.$snotify.error('Xóa thất bại!');\n                });\n            }\n            else {\n                var index = this.dsVatDungPhong.indexOf(this.selectedVatDungPhong);\n                this.dsVatDungPhong.splice(index, 1);\n                this.dialogConfirmDeleteVatDungPhong = false;\n            }\n        },\n        getDataFromApiVatDungPhong(searchParamsVatDungPhong: VatDungPhongApiSearchParams): void {\n            this.searchParamsVatDungPhong.phongID = this.phong.PhongID;\n\n            VatDungPhongApi.search(searchParamsVatDungPhong).then(res => {\n                this.dsVatDungPhong = res.Data;\n                this.searchParamsVatDungPhong.totalItems = res.Pagination.totalItems;\n                this.dsVatDungPhongLoading = false;\n            });\n        },\n        suaVatDungPhong(item: any) {\n            this.vatDungPhong = item;\n            this.isUpdateVatDungPhong = true;\n\n        },\n        saveVatDungPhong(): void {\n            this.$validator.validateAll('frmAddEdit').then((res) => {\n                if (res) {\n                    if (this.isUpdate) {\n                        this.vatDungPhong.Phong = undefined;\n                        this.loading = true;\n                        if (this.isUpdateVatDungPhong) {\n                            VatDungPhongApi.update(this.vatDungPhong.VatDungPhongID, this.vatDungPhong).then(res => {\n                                this.vatDungPhong = {} as VatDungPhong;\n                                this.loading = false;\n                                this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\n                                this.isUpdateVatDungPhong = false\n                            })\n                        }\n                        else {\n                            this.vatDungPhong.PhongID = this.phong.PhongID;\n                            VatDungPhongApi.insert(this.vatDungPhong).then(res => {\n                                this.vatDungPhong = {} as VatDungPhong;\n                                this.loading = false;\n                                this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\n                            })\n                        }\n                    }\n                    else {\n                        this.vatDungPhong.VatDungID = (this.vatDungPhong.VatDung as any).VatDungID;\n                        (this.dsVatDungPhong).push(this.vatDungPhong);\n                        this.vatDungPhong = {} as VatDungPhong;\n                    }\n                }\n\n            });\n        },\n        save(): void {\n            this.$validator.validateAll('frmAddEdit').then((res) => {\n                if (res) {\n                    this.phong.LoaiPhong = undefined;\n                    this.phong.ThuePhong = undefined;\n                    this.phong.VatDungPhong = undefined;\n                    if (this.isUpdate) {\n                        PhongApi.update(this.phong.PhongID, this.phong).then(res => {\n                            this.loading = false;\n                            this.dialog = false;\n                            this.$emit(\"getLaiDanhSach\");\n                            this.$snotify.success('Cập nhật thành công!');\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Cập nhật thất bại!');\n                        });\n                    } else {\n                        this.loading = true;\n                        this.vatDungPhong.VatDung = undefined;\n                        this.phong.VatDungPhong = this.dsVatDungPhong;\n                        PhongApi.insert(this.phong).then(res => {\n                            this.dialog = false;\n                            this.$emit(\"getLaiDanhSach\");\n                            this.phong = res;\n                            this.isUpdate = true;\n                            this.loading = false;\n                            this.$snotify.success('Thêm mới thành công!');\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Thêm mới thất bại!');\n                        }); 2\n                    }\n                }\n            });\n        },\n\n        getDataVatDungFromApi(): void {\n            this.loading = true;\n            VatDungApi.search(this.searchParamsVatDung).then(response => {\n                this.dsVatDung = response.Data;\n                this.loading = false;\n            })\n        },\n        getDataLoaiPhongFromApi(): void {\n            this.loading = true;\n            LoaiPhongApi.search(this.searchParamsLoaiPhong).then(response => {\n                this.dsLoaiPhong = response.Data;\n                this.loading = false;\n            })\n        },\n    }\n});\n",{"version":3,"sources":["ThemSuaPhong.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThemSuaPhong.vue","sourceRoot":"src\\components\\Phong","sourcesContent":["<template>\r\n    <v-dialog v-model=\"dialog\" width=\"900\" persistent scrollable>\r\n        <v-container pa-0 grid-list-md>\r\n            <v-card>\r\n                <v-card-title class=\"primary white--text\" style=\"padding: 5px 15px 5px 15px\">\r\n                    <h3>{{isUpdate ? 'Cập nhật thông tin phòng' : 'Thêm mới thông tin phòng'}}</h3>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn class=\"white--text ma-0\" small @click.native=\"dialog = false\" icon dark><v-icon>close</v-icon></v-btn>\r\n                </v-card-title>\r\n\r\n                <v-card-text>\r\n                    <v-form scope=\"frmAddEdit\">\r\n                        <v-layout>\r\n                            <v-toolbar-title>Thông tin phòng </v-toolbar-title>\r\n                        </v-layout>\r\n                        <v-layout row wrap>\r\n                            <v-flex xs4>\r\n                                <v-select v-model=\"phong.LoaiPhongID\"\r\n                                          :items=\"dsLoaiPhong\"\r\n                                          :search-input.sync=\"searchLoaiPhong\"\r\n                                          item-text=\"TenLoaiPhong\"\r\n                                          item-value=\"LoaiPhongID\"\r\n                                          label=\"Loại phòng\"\r\n                                          :error-messages=\"errors.collect('Loại phòng', 'frmAddEdit')\"\r\n                                          v-validate=\"'required'\"\r\n                                          data-vv-scope=\"frmAddEdit\"\r\n                                          data-vv-name=\"Loại phòng\"\r\n                                          hide-details\r\n                                          clearable></v-select>\r\n                            </v-flex>\r\n                            <v-flex xs4>\r\n                                <v-text-field v-model=\"phong.SoPhong\"\r\n                                              label=\"Số Phòng\"\r\n                                              :error-messages=\"errors.collect('Số Phòng', 'frmAddEdit')\"\r\n                                              v-validate=\"'required'\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Số Phòng\"\r\n                                              hide-details\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs4>\r\n                                <v-checkbox v-model=\"phong.TrangThai\" label=\"TrangThai\"\r\n                                            :error-messages=\"errors.collect('TrangThai', 'frmAddEdit')\"\r\n                                            v-validate=\"''\"\r\n                                            data-vv-scope=\"frmAddEdit\"\r\n                                            data-vv-name=\"TrangThai\"></v-checkbox>\r\n                            </v-flex>\r\n                            <v-flex xs12>\r\n                                <v-layout>\r\n                                    <v-toolbar-title>Vật dụng phòng </v-toolbar-title>\r\n                                </v-layout>\r\n                                <v-layout nowrap>\r\n                                    <v-flex xs3>\r\n                                        <v-select :items=\"dsVatDung\"\r\n                                                  v-model=\"vatDungPhong.VatDung\"\r\n                                                  label=\"Vật dụng\"\r\n                                                  :return-object=\"true\"\r\n                                                  item-text=\"TenVatDung\"\r\n                                                  :error-messages=\"errors.collect('Vật dụng', 'frmAddEdit')\"\r\n                                                  v-validate=\"''\"\r\n                                                  data-vv-scope=\"frmAddEdit\"\r\n                                                  data-vv-name=\"Vật dụng\"\r\n                                                  hide-details\r\n                                                  clearable></v-select>\r\n                                    </v-flex>\r\n                                    <v-flex xs2>\r\n                                        <v-text-field v-model=\"vatDungPhong.SoLuong\"\r\n                                                      label=\"Số lượng\"\r\n                                                      :error-messages=\"errors.collect('Số lượng', 'frmAddEdit')\"\r\n                                                      v-validate=\"''\"\r\n                                                      data-vv-scope=\"frmAddEdit\"\r\n                                                      data-vv-name=\"Số lượng\"\r\n                                                      hide-details\r\n                                                      clearable></v-text-field>\r\n                                    </v-flex>\r\n                                    <v-flex xs6>\r\n                                        <v-text-field v-model=\"vatDungPhong.GhiChu\"\r\n                                                      label=\"Ghi chú\"\r\n                                                      :error-messages=\"errors.collect('Ghi chú', 'frmAddEdit')\"\r\n                                                      v-validate=\"''\"\r\n                                                      data-vv-scope=\"frmAddEdit\"\r\n                                                      data-vv-name=\"Ghi chú\"\r\n                                                      hide-details\r\n                                                      clearable></v-text-field>\r\n                                    </v-flex>\r\n                                    <v-flex xs1 md1 sm1 class=\"pa-2\">\r\n                                        <v-btn color=\"primary\" @click.native=\"saveVatDungPhong()\" small icon><v-icon>{{isUpdateVatDungPhong ? 'done' : 'add'}}</v-icon></v-btn>\r\n                                    </v-flex>\r\n                                </v-layout>\r\n                                <v-layout>\r\n                                    <v-flex xs12 md12 sm12>\r\n                                        <v-card-text class=\"pa-0\">\r\n                                            <v-data-table :headers=\"tableHeaderVatDungPhong\"\r\n                                                          :items=\"dsVatDungPhong\"\r\n                                                          :pagination.sync=\"searchParamsVatDungPhong\"\r\n                                                          :total-items=\"searchParamsVatDungPhong.totalItems\"\r\n                                                          :loading=\"dsVatDungPhongLoading\"\r\n                                                          class=\"table-border table\">\r\n                                                <template slot=\"items\" slot-scope=\"props\">\r\n                                                    <td class=\"text-xs-center\">{{ props.index +1 }}</td>\r\n                                                    <td class=\"text-xs-center\">{{ props.item.VatDung.TenVatDung }}</td>\r\n                                                    <td class=\"text-xs-center\">{{ props.item.SoLuong }}</td>\r\n                                                    <td class=\"text-xs-center\">{{ props.item.GhiChu }}</td>\r\n                                                    <td class=\"text-xs-center\" style=\"width:80px;\">\r\n                                                        <v-btn flat icon small v-show=\"isUpdate\" class=\"ma-0\" @click=\"suaVatDungPhong(props.item)\">\r\n                                                            <v-icon small>edit</v-icon>\r\n                                                        </v-btn>\r\n                                                        <v-btn flat color=\"red\" icon small class=\"ma-0\" @click=\"confirmDeleteVatDungPhong(props.item)\">\r\n                                                            <v-icon small>delete</v-icon>\r\n                                                        </v-btn>\r\n                                                    </td>\r\n                                                </template>\r\n                                            </v-data-table>\r\n                                        </v-card-text>\r\n                                    </v-flex>\r\n                                </v-layout>\r\n                            </v-flex>\r\n                        </v-layout>\r\n                    </v-form>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn class=\"primary\" :disabled=\"loading\" :loading=\"loading\" @click.native=\"save\">{{isUpdate?'Cập nhật':'Thêm mới'}}</v-btn>\r\n                </v-card-actions>\r\n                <v-dialog v-model=\"dialogConfirmDeleteVatDungPhong\" max-width=\"290\">\r\n                    <v-card>\r\n                        <v-card-title class=\"headline\">Xác nhận xóa</v-card-title>\r\n                        <v-card-text class=\"pt-3\">Bạn có chắc chắn muốn xóa?</v-card-text>\r\n                        <v-card-actions>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn @click.native=\"dialogConfirmDeleteVatDungPhong=false\" flat>Hủy</v-btn>\r\n                            <v-btn color=\"red darken-1\" @click.native=\"deleteVatDungPhong\" flat>Xác Nhận</v-btn>\r\n                        </v-card-actions>\r\n                    </v-card>\r\n                </v-dialog>\r\n            </v-card>\r\n        </v-container>\r\n    </v-dialog>\r\n\r\n</template>\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import PhongApi, { PhongApiSearchParams } from '@/apiResources/PhongApi';\r\n    import { Phong } from '@/models/Phong';\r\n    import { VatDungPhong } from '@/models/VatDungPhong';\r\n    import VatDungPhongApi, { VatDungPhongApiSearchParams } from '@/apiResources/VatDungPhongApi';\r\n    import { LoaiPhong } from '@/models/LoaiPhong';\r\n    import LoaiPhongApi, { LoaiPhongApiSearchParams } from '@/apiResources/LoaiPhongApi';\r\n    import { VatDung } from '@/models/VatDung';\r\n    import VatDungApi, { VatDungApiSearchParams } from '@/apiResources/VatDungApi';\r\n    export default Vue.extend({\r\n        $_veeValidate: {\r\n            validator: 'new'\r\n        },\r\n        components: {},\r\n        data() {\r\n            return {\r\n                dialog: false,\r\n                searchParamsVatDungPhong: { includeEntities: true } as VatDungPhongApiSearchParams,\r\n                dsVatDung: [] as VatDung[],\r\n                isUpdateVatDungPhong: false,\r\n                searchLoaiPhong: '',\r\n                dsLoaiPhong: [] as LoaiPhong[],\r\n                isUpdate: false,\r\n                phong: { VatDungPhong: [] as VatDungPhong[] } as Phong,\r\n                vatDungPhong: {\r\n                    VatDung: {} as VatDung\r\n                } as VatDungPhong,\r\n                searchParamsLoaiPhong: { includeEntities: true } as LoaiPhongApiSearchParams,\r\n                selectedVatDungPhong: {} as VatDungPhong,\r\n                dialogConfirmDeleteVatDungPhong: false,\r\n                dsVatDungPhong: [] as VatDungPhong[],\r\n                dsVatDungPhongLoading: false,\r\n                searchParamsVatDung: { includeEntities: true } as VatDungApiSearchParams,\r\n                tableHeaderVatDungPhong: [\r\n                    { text: 'STT', value: '', align: 'center', sortable: true },\r\n                    { text: 'Tên vật dụng', value: 'VatDungPhongID', align: 'center', sortable: true },\r\n                    { text: 'Số lượng', value: 'SoLuong', align: 'center', sortable: true },\r\n                    { text: 'Ghi chú', value: 'GhiChu', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: '#', align: 'center', sortable: false },\r\n                ],\r\n                loading: false,\r\n                searchParamsPhong: {} as PhongApiSearchParams,\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n\r\n\r\n        created() {\r\n            this.getDataVatDungFromApi();\r\n            this.getDataLoaiPhongFromApi();\r\n        },\r\n        methods: {\r\n            show(isUpdate: boolean, item: any) {\r\n                this.dialog = true;\r\n                this.$validator.errors.clear(\"frmAddEdit\");\r\n                this.isUpdate = isUpdate;\r\n                this.vatDungPhong = {} as VatDungPhong;\r\n                this.dsVatDungPhong = [] as VatDungPhong[];\r\n                if (isUpdate == true)\r\n                    this.getDataFromApi(item.PhongID);\r\n                else\r\n                    this.phong = {} as Phong;\r\n            },\r\n\r\n            getDataFromApi(id: number): void {\r\n                PhongApi.detail(id).then(res => {\r\n                    this.phong = res;\r\n                    this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\r\n\r\n                });\r\n            },\r\n            confirmDeleteVatDungPhong(vatDungPhong: VatDungPhong): void {\r\n                this.selectedVatDungPhong = vatDungPhong;\r\n                this.dialogConfirmDeleteVatDungPhong = true;\r\n            },\r\n            deleteVatDungPhong(): void {\r\n                if (this.selectedVatDungPhong.VatDungPhongID != null) {\r\n                    VatDungPhongApi.delete(this.selectedVatDungPhong.VatDungPhongID).then(res => {\r\n                        this.$snotify.success('Xóa thành công!');\r\n                        this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\r\n                        this.dialogConfirmDeleteVatDungPhong = false;\r\n                    }).catch(res => {\r\n                        this.$snotify.error('Xóa thất bại!');\r\n                    });\r\n                }\r\n                else {\r\n                    var index = this.dsVatDungPhong.indexOf(this.selectedVatDungPhong);\r\n                    this.dsVatDungPhong.splice(index, 1);\r\n                    this.dialogConfirmDeleteVatDungPhong = false;\r\n                }\r\n            },\r\n            getDataFromApiVatDungPhong(searchParamsVatDungPhong: VatDungPhongApiSearchParams): void {\r\n                this.searchParamsVatDungPhong.phongID = this.phong.PhongID;\r\n\r\n                VatDungPhongApi.search(searchParamsVatDungPhong).then(res => {\r\n                    this.dsVatDungPhong = res.Data;\r\n                    this.searchParamsVatDungPhong.totalItems = res.Pagination.totalItems;\r\n                    this.dsVatDungPhongLoading = false;\r\n                });\r\n            },\r\n            suaVatDungPhong(item: any) {\r\n                this.vatDungPhong = item;\r\n                this.isUpdateVatDungPhong = true;\r\n\r\n            },\r\n            saveVatDungPhong(): void {\r\n                this.$validator.validateAll('frmAddEdit').then((res) => {\r\n                    if (res) {\r\n                        if (this.isUpdate) {\r\n                            this.vatDungPhong.Phong = undefined;\r\n                            this.loading = true;\r\n                            if (this.isUpdateVatDungPhong) {\r\n                                VatDungPhongApi.update(this.vatDungPhong.VatDungPhongID, this.vatDungPhong).then(res => {\r\n                                    this.vatDungPhong = {} as VatDungPhong;\r\n                                    this.loading = false;\r\n                                    this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\r\n                                    this.isUpdateVatDungPhong = false\r\n                                })\r\n                            }\r\n                            else {\r\n                                this.vatDungPhong.PhongID = this.phong.PhongID;\r\n                                VatDungPhongApi.insert(this.vatDungPhong).then(res => {\r\n                                    this.vatDungPhong = {} as VatDungPhong;\r\n                                    this.loading = false;\r\n                                    this.getDataFromApiVatDungPhong(this.searchParamsVatDungPhong);\r\n                                })\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.vatDungPhong.VatDungID = (this.vatDungPhong.VatDung as any).VatDungID;\r\n                            (this.dsVatDungPhong).push(this.vatDungPhong);\r\n                            this.vatDungPhong = {} as VatDungPhong;\r\n                        }\r\n                    }\r\n\r\n                });\r\n            },\r\n            save(): void {\r\n                this.$validator.validateAll('frmAddEdit').then((res) => {\r\n                    if (res) {\r\n                        this.phong.LoaiPhong = undefined;\r\n                        this.phong.ThuePhong = undefined;\r\n                        this.phong.VatDungPhong = undefined;\r\n                        if (this.isUpdate) {\r\n                            PhongApi.update(this.phong.PhongID, this.phong).then(res => {\r\n                                this.loading = false;\r\n                                this.dialog = false;\r\n                                this.$emit(\"getLaiDanhSach\");\r\n                                this.$snotify.success('Cập nhật thành công!');\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Cập nhật thất bại!');\r\n                            });\r\n                        } else {\r\n                            this.loading = true;\r\n                            this.vatDungPhong.VatDung = undefined;\r\n                            this.phong.VatDungPhong = this.dsVatDungPhong;\r\n                            PhongApi.insert(this.phong).then(res => {\r\n                                this.dialog = false;\r\n                                this.$emit(\"getLaiDanhSach\");\r\n                                this.phong = res;\r\n                                this.isUpdate = true;\r\n                                this.loading = false;\r\n                                this.$snotify.success('Thêm mới thành công!');\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Thêm mới thất bại!');\r\n                            }); 2\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n\r\n            getDataVatDungFromApi(): void {\r\n                this.loading = true;\r\n                VatDungApi.search(this.searchParamsVatDung).then(response => {\r\n                    this.dsVatDung = response.Data;\r\n                    this.loading = false;\r\n                })\r\n            },\r\n            getDataLoaiPhongFromApi(): void {\r\n                this.loading = true;\r\n                LoaiPhongApi.search(this.searchParamsLoaiPhong).then(response => {\r\n                    this.dsLoaiPhong = response.Data;\r\n                    this.loading = false;\r\n                })\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}