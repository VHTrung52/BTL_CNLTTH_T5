{"remainingRequest":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\DatPhong\\DanhSachDatPhong.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\src\\components\\DatPhong\\DanhSachDatPhong.vue","mtime":1603956408956},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603956549663},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603956549663},{"path":"C:\\Users\\Trang\\Desktop\\My My hihi\\Trên lớp\\CNLTTH_LTTH\\QuanLyKhachSan\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport DatPhongApi, { DatPhongApiSearchParams } from '@/apiResources/DatPhongApi';\nimport { DatPhong } from '@/models/DatPhong';\nimport ThemSuaDatPhong from './ThemSuaDatPhong.vue';\n\nexport default Vue.extend({\n    components: {\n        ThemSuaDatPhong\n    },\n    data() {\n        return {\n            lstTrangThai: [\n                { name: 'Tất cả', value: null as any },\n                { name: 'Chưa nhận', value: 0 },\n                { name: 'Đã nhận', value: 1 },\n                { name: 'Đã hủy', value: 2},\n            ],\n            dsDatPhong: [] as DatPhong[],\n            tableHeader: [\n                { text: 'STT', value: 'DatPhongID', align: 'center', sortable: true },\n                { text: 'Họ tên', value: 'HoTen', align: 'center', sortable: true },\n                { text: 'Số điện thoại', value: 'SoDienThoai', align: 'center', sortable: true },\n                { text: 'Ngày thuê', value: 'ThoiGianDat', align: 'center', sortable: true },\n                { text: 'Tên loại phòng', value: 'LoaiPhong.TenLoaiPhong', align: 'center', sortable: true },\n                { text: 'Số lượng người', value: 'SoLuongNguoi', align: 'center', sortable: true },\n                { text: 'Số ngày đặt', value: 'SoNgayDat', align: 'center', sortable: true },\n                { text: 'Ngày đặt', value: 'NgayTao', align: 'center', sortable: true },\n                { text: 'Trạng thái', value: 'TrangThai', align: 'center', sortable: true },\n                { text: 'Thao tác', value: '#', align: 'center', sortable: false },\n            ],\n            searchParamsDatPhong: { includeEntities: true, rowsPerPage: 10, TrangThai: null as any } as DatPhongApiSearchParams,\n            loadingTable: false,\n            selectedDatPhong: {} as DatPhong,\n            dialogConfirmDelete: false,\n            dialogConfirm: false,\n        }\n    },\n    watch: {\n    },\n    created() {\n        this.getDataFromApi(this.searchParamsDatPhong);\n    },\n    methods: {\n        getDataFromApi(searchParamsDatPhong: DatPhongApiSearchParams): void {\n            this.loadingTable = true;\n            searchParamsDatPhong.laDatPhong = true;\n            DatPhongApi.search(searchParamsDatPhong).then(res => {\n                this.dsDatPhong = res.Data;\n                this.searchParamsDatPhong.totalItems = res.Pagination.totalItems;\n                this.loadingTable = false;\n            });\n        },\n        showDialogThemSua(isUpdate: boolean, item: any): void {\n            (this.$refs.themSuaDatPhong as any).show(isUpdate, item);\n        },\n        confirmDelete(datPhong: DatPhong): void {\n            this.selectedDatPhong = datPhong;\n            this.dialogConfirmDelete = true;\n        },\n        deleteDatPhong(): void {\n            this.selectedDatPhong.TrangThai = 2;\n            DatPhongApi.update(this.selectedDatPhong.DatPhongID, this.selectedDatPhong).then(res => {\n                this.$snotify.success('Hủy đặt phòng thành công!');\n                this.getDataFromApi(this.searchParamsDatPhong);\n                this.dialogConfirmDelete = false;\n            }).catch(res => {\n                this.$snotify.error('Hủy đặt phòng thất bại!');\n            });\n        },\n        confirm(datPhong: DatPhong): void {\n            this.selectedDatPhong = datPhong;\n            this.dialogConfirm = true;\n        },\n        confirmDatPhong(): void {\n            this.selectedDatPhong.TrangThai = 1;\n            DatPhongApi.update(this.selectedDatPhong.DatPhongID, this.selectedDatPhong).then(res => {\n                this.$snotify.success('Xác nhận thành công!');\n                this.$eventBus.$emit('getSoKhachDatPhong');\n                this.getDataFromApi(this.searchParamsDatPhong);\n                this.dialogConfirm = false;\n            }).catch(res => {\n                this.$snotify.error('Xác nhận thất bại!');\n            });\n        },\n    }\n});\n",{"version":3,"sources":["DanhSachDatPhong.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DanhSachDatPhong.vue","sourceRoot":"src\\components\\DatPhong","sourcesContent":["<template>\r\n    <v-card width=\"100%\" style=\"padding: 20px\">\r\n        <v-layout row wrap>\r\n            <v-flex xs12>\r\n                <h3>Danh khách đặt phòng</h3>\r\n            </v-flex>\r\n            <v-flex xs12>\r\n                <v-layout row wrap>\r\n                    <v-flex xs12>\r\n                        <v-layout nowrap>\r\n                            <v-flex xs4>\r\n                                <v-text-field label=\"Tìm kiếm\" append-icon=\"search\" v-model=\"searchParamsDatPhong.HoTen\" @input=\"getDataFromApi(searchParamsDatPhong)\"></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs2 nowrap style=\"padding-right: 5px; \">\r\n                                <v-datepicker label=\"Từ ngày\" v-model=\"searchParamsDatPhong.NgayBD\" @input=\"getDataFromApi(searchParamsDatPhong)\"></v-datepicker>\r\n                            </v-flex>\r\n                            <v-flex xs2 style=\"padding-right: 10px; \">\r\n                                <v-datepicker label=\"Đến ngày\" v-model=\"searchParamsDatPhong.NgayKT\" @input=\"getDataFromApi(searchParamsDatPhong)\"></v-datepicker>\r\n                            </v-flex>\r\n                            <v-flex xs2>\r\n                                <v-autocomplete v-model=\"searchParamsDatPhong.TrangThai\"\r\n                                                :items=\"lstTrangThai\"\r\n                                                item-text=\"name\"\r\n                                                item-value=\"value\"\r\n                                                label=\"Trạng thái\"\r\n                                                @change=\"getDataFromApi(searchParamsDatPhong)\"></v-autocomplete>\r\n\r\n                            </v-flex>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn small color=\"primary\" style=\"margin-top: auto;\" @click=\"showDialogThemSua(false, {})\">+ Thêm mới</v-btn>\r\n                        </v-layout>\r\n                    </v-flex>\r\n                    <v-flex xs12>\r\n                        <v-data-table :headers=\"tableHeader\"\r\n                                      :items=\"dsDatPhong\"\r\n                                      @update:pagination=\"getDataFromApi\" :pagination.sync=\"searchParamsDatPhong\"\r\n                                      :total-items=\"searchParamsDatPhong.totalItems\"\r\n                                      :loading=\"loadingTable\"\r\n                                      class=\"table-border table\">\r\n                            <template slot=\"items\" slot-scope=\"props\">\r\n                                <td>{{ props.index + 1 }}</td>\r\n                                <td>{{ props.item.HoTen }}</td>\r\n                                <td>{{ props.item.SoDienThoai }}</td>\r\n                                <td>{{ props.item.ThoiGianDat === null ? \"\" : props.item.ThoiGianDat|moment('DD/MM/YYYY') }}</td>\r\n                                <td>{{ props.item.LoaiPhong != null? props.item.LoaiPhong.TenLoaiPhong :\"\" }}</td>\r\n                                <td>{{ props.item.SoLuongNguoi }}</td>\r\n                                <td>{{ props.item.SoNgayDat }}</td>\r\n                                <td>{{ props.item.NgayTao === null ? \"\" : props.item.NgayTao|moment('DD/MM/YYYY') }}</td>\r\n                                <td v-if=\"props.item.TrangThai == 0\">Đã đặt</td>\r\n                                <td v-if=\"props.item.TrangThai == 1\">Đã nhận</td>\r\n                                <td v-if=\"props.item.TrangThai == 2\">Đã hủy</td>\r\n                                <td class=\"icon-xs-center\" style=\"width:110px;\">\r\n                                    <v-layout nowrap>\r\n                                        <v-tooltip top>\r\n                                            <v-badge left slot=\"activator\">\r\n                                                <v-btn flat icon small @click=\"showDialogThemSua(true, props.item)\" class=\"ma-0\">\r\n                                                    <v-icon small>edit</v-icon>\r\n                                                </v-btn>\r\n                                            </v-badge>\r\n                                            <span>Sửa</span>\r\n                                        </v-tooltip>\r\n                                        <v-tooltip top>\r\n                                            <v-badge left slot=\"activator\">\r\n                                                <v-btn class=\"ma-0\" flat color=\"green\" icon small @click=\"confirm(props.item)\">\r\n                                                    <v-icon small>done</v-icon>\r\n                                                </v-btn>\r\n                                            </v-badge>\r\n                                            <span>Xác nhận thuê phòng</span>\r\n                                        </v-tooltip>\r\n                                        <v-tooltip top>\r\n                                            <v-badge left slot=\"activator\">\r\n                                                <v-btn flat color=\"red\" icon small class=\"ma-0\" @click=\"confirmDelete(props.item)\">\r\n                                                    <v-icon small>delete</v-icon>\r\n                                                </v-btn>\r\n                                            </v-badge>\r\n                                            <span>Hủy đặt phòng</span>\r\n                                        </v-tooltip>\r\n\r\n                                    </v-layout>\r\n                                </td>\r\n                            </template>\r\n                        </v-data-table>\r\n                    </v-flex>\r\n                </v-layout>\r\n            </v-flex>\r\n            <v-dialog v-model=\"dialogConfirmDelete\" max-width=\"290\">\r\n                <v-card>\r\n                    <v-card-title class=\"headline\">Xác nhận hủy đặt phòng</v-card-title>\r\n                    <v-card-text class=\"pt-3\">Bạn có chắc chắn muốn hủy?</v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn @click.native=\"dialogConfirmDelete=false\" flat>Hủy</v-btn>\r\n                        <v-btn color=\"red darken-1\" @click.native=\"deleteDatPhong\" flat>Xác Nhận</v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n            <v-dialog v-model=\"dialogConfirm\" max-width=\"290\">\r\n                <v-card>\r\n                    <v-card-title class=\"headline\">Xác nhận thuê phòng</v-card-title>\r\n                    <v-card-text class=\"pt-3\">Bạn có chắc chắn muốn xác nhận?</v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn @click.native=\"dialogConfirm=false\" flat>Hủy</v-btn>\r\n                        <v-btn color=\"red darken-1\" @click.native=\"confirmDatPhong\" flat>Xác Nhận</v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n            <them-sua-dat-phong ref=\"themSuaDatPhong\" @getDatPhong=\"getDataFromApi(searchParamsDatPhong)\"></them-sua-dat-phong>\r\n\r\n        </v-layout>\r\n    </v-card>\r\n</template>\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import DatPhongApi, { DatPhongApiSearchParams } from '@/apiResources/DatPhongApi';\r\n    import { DatPhong } from '@/models/DatPhong';\r\n    import ThemSuaDatPhong from './ThemSuaDatPhong.vue';\r\n\r\n    export default Vue.extend({\r\n        components: {\r\n            ThemSuaDatPhong\r\n        },\r\n        data() {\r\n            return {\r\n                lstTrangThai: [\r\n                    { name: 'Tất cả', value: null as any },\r\n                    { name: 'Chưa nhận', value: 0 },\r\n                    { name: 'Đã nhận', value: 1 },\r\n                    { name: 'Đã hủy', value: 2},\r\n                ],\r\n                dsDatPhong: [] as DatPhong[],\r\n                tableHeader: [\r\n                    { text: 'STT', value: 'DatPhongID', align: 'center', sortable: true },\r\n                    { text: 'Họ tên', value: 'HoTen', align: 'center', sortable: true },\r\n                    { text: 'Số điện thoại', value: 'SoDienThoai', align: 'center', sortable: true },\r\n                    { text: 'Ngày thuê', value: 'ThoiGianDat', align: 'center', sortable: true },\r\n                    { text: 'Tên loại phòng', value: 'LoaiPhong.TenLoaiPhong', align: 'center', sortable: true },\r\n                    { text: 'Số lượng người', value: 'SoLuongNguoi', align: 'center', sortable: true },\r\n                    { text: 'Số ngày đặt', value: 'SoNgayDat', align: 'center', sortable: true },\r\n                    { text: 'Ngày đặt', value: 'NgayTao', align: 'center', sortable: true },\r\n                    { text: 'Trạng thái', value: 'TrangThai', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: '#', align: 'center', sortable: false },\r\n                ],\r\n                searchParamsDatPhong: { includeEntities: true, rowsPerPage: 10, TrangThai: null as any } as DatPhongApiSearchParams,\r\n                loadingTable: false,\r\n                selectedDatPhong: {} as DatPhong,\r\n                dialogConfirmDelete: false,\r\n                dialogConfirm: false,\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n        created() {\r\n            this.getDataFromApi(this.searchParamsDatPhong);\r\n        },\r\n        methods: {\r\n            getDataFromApi(searchParamsDatPhong: DatPhongApiSearchParams): void {\r\n                this.loadingTable = true;\r\n                searchParamsDatPhong.laDatPhong = true;\r\n                DatPhongApi.search(searchParamsDatPhong).then(res => {\r\n                    this.dsDatPhong = res.Data;\r\n                    this.searchParamsDatPhong.totalItems = res.Pagination.totalItems;\r\n                    this.loadingTable = false;\r\n                });\r\n            },\r\n            showDialogThemSua(isUpdate: boolean, item: any): void {\r\n                (this.$refs.themSuaDatPhong as any).show(isUpdate, item);\r\n            },\r\n            confirmDelete(datPhong: DatPhong): void {\r\n                this.selectedDatPhong = datPhong;\r\n                this.dialogConfirmDelete = true;\r\n            },\r\n            deleteDatPhong(): void {\r\n                this.selectedDatPhong.TrangThai = 2;\r\n                DatPhongApi.update(this.selectedDatPhong.DatPhongID, this.selectedDatPhong).then(res => {\r\n                    this.$snotify.success('Hủy đặt phòng thành công!');\r\n                    this.getDataFromApi(this.searchParamsDatPhong);\r\n                    this.dialogConfirmDelete = false;\r\n                }).catch(res => {\r\n                    this.$snotify.error('Hủy đặt phòng thất bại!');\r\n                });\r\n            },\r\n            confirm(datPhong: DatPhong): void {\r\n                this.selectedDatPhong = datPhong;\r\n                this.dialogConfirm = true;\r\n            },\r\n            confirmDatPhong(): void {\r\n                this.selectedDatPhong.TrangThai = 1;\r\n                DatPhongApi.update(this.selectedDatPhong.DatPhongID, this.selectedDatPhong).then(res => {\r\n                    this.$snotify.success('Xác nhận thành công!');\r\n                    this.$eventBus.$emit('getSoKhachDatPhong');\r\n                    this.getDataFromApi(this.searchParamsDatPhong);\r\n                    this.dialogConfirm = false;\r\n                }).catch(res => {\r\n                    this.$snotify.error('Xác nhận thất bại!');\r\n                });\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}